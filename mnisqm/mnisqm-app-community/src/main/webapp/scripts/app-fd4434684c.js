!function(){"use strict";angular.module("nqms",["ngLocale","ngAnimate","ngCookies","ngTouch","ngSanitize","ngMessages","ngAria","ngResource","ui.router","ui.bootstrap","toastr","w5c.validator","ngTable"])}(),function(){"use strict";function e(){var e=this;e.lst=[{ruleIndex:"1",ruleInfo:"早班",start:"2016-04-08",end:"2016-06-08",valid:"是",user:"张三",remark:"怀孕"},{ruleIndex:"2",ruleInfo:"早班",start:"2016-03-08",end:"2016-06-08",valid:"是",user:"李四",remark:"晚上培训"}]}angular.module("nqms").controller("DepartmentManagerTurnsRuleController",e)}(),function(){"use strict";function e(){var e=this;e.lst=[{name:"张三",group:"+1",d1:"早班",d2:"早班",d3:"晚班",d4:"夜班",d5:"年休",d6:"休息",d7:"夜班"},{name:"李四",group:"+1",d1:"晚班",d2:"夜班",d3:"休息",d4:"夜班",d5:"夜班",d6:"早班",d7:"夜班"},{name:"王五",group:"+2",d1:"夜班",d2:"晚班班",d3:"晚班",d4:"夜班",d5:"夜班",d6:"晚班",d7:"夜班"},{name:"赵六",group:"+1",d1:"早班",d2:"早班",d3:"晚班",d4:"休息",d5:"晚班",d6:"夜班",d7:"夜班"},{name:"朱七七",group:"0",d1:"早班",d2:"早班",d3:"休息",d4:"晚班",d5:"休息",d6:"早班",d7:"夜班"},{name:"黑白白",group:"-1",d1:"早班",d2:"休息",d3:"休息",d4:"年假",d5:"早班",d6:"晚班",d7:"夜班"}]}angular.module("nqms").controller("DepartmentManagerTurnsController",e)}(),function(){"use strict";function e(){var e=this;e.lst=[{deptName:"测试一",bedNo:"01",group:1},{deptName:"测试一",bedNo:"02",group:1},{deptName:"测试一",bedNo:"03",group:1},{deptName:"测试一",bedNo:"04",group:2},{deptName:"测试一",bedNo:"05",group:2},{deptName:"测试一",bedNo:"06",group:2}]}angular.module("nqms").controller("DepartmentManagerStatisticsController",e)}(),function(){"use strict";function e(){var e=this;e.lst=[{deptName:"测试一",name:"张三",group:1,start:"2016-03-18 08",end:"2016-03-22 24",yy:"回家",status:"批准",remark:""},{deptName:"测试一",name:"李四",group:1,start:"2016-03-18 08",end:"2016-03-22 24",yy:"生病",status:"批准",remark:""},{deptName:"测试一",name:"王五",group:1,start:"2016-03-18 08",end:"2016-03-22 24",yy:"",status:"驳回",remark:"请写明原因"},{deptName:"测试一",name:"赵六",group:1,start:"2016-03-18 08",end:"2016-03-22 24",yy:"回家",status:"批准",remark:""},{deptName:"测试一",name:"朱七七",group:1,start:"2016-03-18 08",end:"2016-03-22 24",yy:"回家",status:"未处理",remark:""}]}angular.module("nqms").controller("DepartmentManagerLeaveController",e)}(),function(){"use strict";function e(){var e=this;e.lst=[{deptName:"张三",bedNo:"01",group:1,level:"N3",yb:"是"},{deptName:"李四",bedNo:"02",group:1,level:"N3",yb:"是"},{deptName:"王五",bedNo:"03",group:1,level:"N2",yb:"否"},{deptName:"赵六",bedNo:"04",group:2,level:"N1",yb:"否"},{deptName:"陈七",bedNo:"05",group:2,level:"N2",yb:"否"},{deptName:"孙八",bedNo:"06",group:2,level:"N1",yb:"否"}]}angular.module("nqms").controller("DepartmentManagerEndemicAreaController",e)}(),function(){"use strict";function e(){var e=this;e.lst=[{deptName:"测试一",index:1,name:"A",remark:"白班",start:"8",end:"16",persons:"5",yy:"N3"},{deptName:"测试一",index:2,name:"a",remark:"白班",start:"16",end:"24",persons:"5",yy:""},{deptName:"测试一",index:3,name:"N",remark:"晚班",start:"0",end:"8",persons:"5",yy:""},{deptName:"测试一",index:4,name:"P",remark:"夜班",start:"0",end:"8",persons:"5",yy:"夜班准入"}]}angular.module("nqms").controller("DepartmentManagerClassesController",e)}(),function(){"use strict";function e(){var e=this;e.lst=[{deptName:"测试一",bedNo:"01",group:1},{deptName:"测试一",bedNo:"02",group:1},{deptName:"测试一",bedNo:"03",group:1},{deptName:"测试一",bedNo:"04",group:2},{deptName:"测试一",bedNo:"05",group:2},{deptName:"测试一",bedNo:"06",group:2}]}angular.module("nqms").controller("DepartmentManagerBedController",e)}(),function(){"use strict";function e(){var e=this;e.lst=[{deptName:"测试一",bedNo:"01",group:1},{deptName:"测试一",bedNo:"02",group:1},{deptName:"测试一",bedNo:"03",group:1},{deptName:"测试一",bedNo:"04",group:2},{deptName:"测试一",bedNo:"05",group:2},{deptName:"测试一",bedNo:"06",group:2}]}angular.module("nqms").controller("DepartmentManagerAttemperController",e)}(),function(){"use strict";function e(e,t,a,l,o,s){function n(e){function o(e){l.error("获取用户数据失败！\n"+angular.toJson(e.data,!0))}return a.get(t.users.getUserList,{params:{deptCode:e}}).then(m)["catch"](o)}function r(e){return a.post(t.users.deleteUser,{seqId:e}).then(m)}function i(e){return a.post(t.users.saveUser,e).then(m)}function d(e){return a.post(t.users.saveUserRole,e).then(m)}function c(e){return a.post(t.users.deleteUserRole,e).then(m)}function m(e){return"0"===e.data.code?e:void 0}var p={getUserList:n,deleteUser:r,save:i,saveUserRole:d,deleteUserRole:c};return p}e.$inject=["$window","apiHost","$http","$log","$q","toastr"],angular.module("nqms").factory("usersService",e)}(),function(){"use strict";function e(e,t,a,l,o,s,n,r,i,d){function c(e,a){h.selectedDept=e,h.selectedUser=!1,D.formData={deptCode:e,deptName:a},n.getUserList(e).then(function(e){"0"===e.data.code&&(h.tableParams=new o({},{dataset:e.data.data}))}),r.getUserList(e).then(function(e){e&&(D.metaData.userList=e,t.info(e))})}function m(e){if(e)D.formData=angular.extend({},D.formData,e);else for(var t in D.formData)D.formData.hasOwnProperty(t)&&"deptCode"!==t&&"deptName"!==t&&delete D.formData[t];i.open({templateUrl:"app/system/users/addUser.tpl.html",ok:v,size:"md",data:D})}function p(e){var t="app/system/roles/addRole.tpl.html";e?(y.formData=angular.extend({},y.formData,e),i.open({templateUrl:t,ok:v,size:"md",data:y})):(t="app/system/users/addExistRole.tpl.html",d.getUserRoleList({userId:d.currentUser.user.seqId}).then(function(e){y.metaData.roleList=e.data.data,y.metaData.currentUser=h.selectedUser,y.metaData.deptList=angular.extend([],h.deptData.belongedDepts),y.metaData.deptList.unshift({deptCode:h.deptData.deptCode,deptName:h.deptData.deptName}),y.metaData.deptList=angular.extend({},[D.formData]),y.metaData.hadRoleList=h.userRoleList.map(function(e){return e.roleCode}),i.open({templateUrl:t,ok:b,size:"md",data:y})}))}function u(e){n.deleteUser(e).then(function(e){e&&"0"===e.data.code&&(s.success("删除成功！","提示"),c(D.formData.deptCode,D.formData.deptName),i.close("success"))})}function v(e){n.save(e).then(function(e){e&&"0"===e.data.code&&(s.success("已保存！","提示"),c(D.formData.deptCode,D.formData.deptName),i.close("success"))})}function b(e){n.saveUserRole(e).then(function(e){e&&"0"===e.data.code&&(s.success("添加成功！","提示"),f(h.selectedUser),i.close("success"))})}function f(e){h.selectedUser=e,d.getUserRoleList({userId:e.seqId}).then(function(e){h.userRoleList=e.data.data,h.roleTableParams=new o({},{dataset:e.data.data})})}function g(e){n.deleteUserRole(e).then(function(e){e&&"0"===e.data.code&&(s.success("删除成功！","提示"),f(h.selectedUser),i.close("success"))})}var h=this,D={formData:{},metaData:{}},y={formData:{},metaData:{}};l.getDeptData().then(function(e){h.deptData=e}),h.del=u,h.open=m,h.delUserRole=g,h.openRole=p,h.showRole=f,h.selectedDept=null,h.load=c}e.$inject=["$scope","$log","$uibModal","deptService","NgTableParams","toastr","usersService","filesService","modalService","security"],angular.module("nqms").controller("UsersController",e)}(),function(){"use strict";function e(e,t,a,l,o){function s(){a.save(r.role).then(function(a){a&&"0"===a.data.code?(o.success("添加成功！","提示"),e.dismiss("cancel"),l.getUserRoleList(),t.$apply()):o.error("保存失败","警告")})}function n(){e.dismiss("cancel")}var r=this;r.cancel=n,r.save=s}e.$inject=["$uibModalInstance","$rootScope","rolesService","security","toastr"],angular.module("nqms").controller("RolesModalController",e)}(),function(){"use strict";function e(e,t,a,l,o,s){function n(e){function o(e){return"0"===e.data.code?e:void l.error("获取用户数据失败！\n"+e.data.msg)}function s(e){l.error("获取用户数据失败！\n"+angular.toJson(e.data,!0))}return a.get(t.roles.getHaveFunction,{params:{roleCode:e}}).then(o)["catch"](s)}function r(e){function o(e){return"0"===e.data.code?e:void l.error("获取用户数据失败！\n"+e.data.msg)}function s(e){l.error("获取用户数据失败！\n"+angular.toJson(e.data,!0))}return a.get(t.roles.getNotHaveFunction,{params:{roleCode:e}}).then(o)["catch"](s)}function i(e){return a.post(t.roles.updateRole,e).then(function(e){return"0"===e.data.code?e:null})}function d(e){return a.post(t.roles.saveRole,e).then(function(e){return"0"===e.data.code?e:null})["catch"](function(e){})}function c(e){return a.post(t.roles.deleteRole,e).then(function(e){return"0"===e.data.code?e:null})}var m={getHaveFunction:n,getNotHaveFunction:r,save:d,edit:i,del:c};return m}e.$inject=["$window","apiHost","$http","$log","$q","toastr"],angular.module("nqms").factory("rolesService",e)}(),function(){"use strict";function e(e,t,a,l,o,s,n,r,i,d){function c(e){var l=o.getNotHaveFunction(e.roleCode),s=o.getHaveFunction(e.roleCode);g.roleDetail=e,a.all([l,s]).then(function(e){t.info(e),g.notHaveList=e[0]&&"0"===e[0].data.code?e[0].data.data:[],g.hadList=e[1]&&"0"===e[1].data.code?e[1].data.data:[]})}function m(){r.open({templateUrl:"app/system/roles/addRole.tpl.html",size:"md",ok:v})}function p(){var e={seqId:g.roleDetail.seqId,roleCode:g.roleDetail.roleCode};o.del(e).then(function(e){e&&(s.success("该角色已删除","提示"),g.roleDetail=null,f())})}function u(){var e=angular.copy(g.roleDetail),a=[];e.funs=angular.copy(g.hadList),e.funs.forEach(function(e,t){a=a.concat(e.child),e.child=[]}),e.funs=e.funs.concat(a),delete e.updateTime,delete e.createTime,t.info(e),o.edit(e).then(function(e){t.info(e),e&&"0"===e.data.code?(s.success("保存成功！","提示"),t.info(g.hadList)):s.error(e.data.msg,"警告")})}function v(e){o.save(e).then(function(e){e&&"0"===e.data.code?(s.success("添加成功！","提示"),r.close("success"),f()):s.error("保存失败","警告")})}function b(e,t,a,l,o){var s,n="add"===o?g.hadList:g.notHaveList,r="add"===o?g.notHaveList:g.hadList;n.some(function(a,l){return a.funCode===e.funCode?(a.child.push(t),!0):void(l===n.length-1&&(s=angular.copy(e),s.child=[t],n.push(s)))}),0===n.length&&(s=angular.copy(e),s.child=[t],n.push(s)),e.child.splice(l,1),0===e.child.length&&r.splice(a,1)}function f(){i.getUserRoleList().then(function(e){g.roleData=e.data.data})}var g=this;g.roleData=i.roleList,i.getUserRoleList().then(function(e){g.roleData=i.roleList});g.del=p,g.edit=u,g.open=m,g.navExchange=b,g.load=c}e.$inject=["$scope","$log","$q","$uibModal","rolesService","toastr","NgTableParams","modalService","security","$injector"],angular.module("nqms").controller("RolesController",e)}(),function(){"use strict";function e(e,t,a,l,o,s,n,r,i){function d(e){var t={};t[e]=m.count[e],"comUser"==e?(t[e].birthday&&(t[e].birthday=s(t[e].birthday).format("YYYY-MM-DD")),t[e].practiceApproveDate&&(t[e].practiceApproveDate=s(t[e].practiceApproveDate).format("YYYY-MM-DD")),t[e].inductionDate&&(t[e].inductionDate=s(t[e].inductionDate).format("YYYY-MM-DD")),t[e].graduationDate&&(t[e].graduationDate=s(t[e].graduationDate).format("YYYY-MM-DD")),t[e].practiceValidDate&&(t[e].practiceValidDate=s(t[e].practiceValidDate).format("YYYY-MM-DD")),m.count[e].deptCode=l.selectedDeptCode):("comUserFamily"!==e&&(t[e].startDate=s(t[e].startDate).format("YYYY-MM-DD"),t[e].endDate=s(t[e].endDate).format("YYYY-MM-DD")),t[e].map(function(e,t){return e.userCode=l.selectedUser.comUser.userCode,e})),t.dataType=e,l.add(t).then(function(e){e&&(n.success("保存成功！","提示"),l.getUserInfo(m.count.comUser.userCode,m.count.comUser.hisCode).then(function(e){m.accessible=!0,m.rootScope.$broadcast("refreshUserList",l.selectedDeptCode),m.rootScope.$broadcast("refreshUserDetail",e)}))})}function c(){a.dismiss("cancel")}var m=this;m.rootScope=e,m.scope=t,m.cancel=c,m.datepickerOption={dateDisabled:"disabled",formatYear:"yyyy",formatMonth:"MM",formatDay:"dd",initDate:new Date,maxDate:new Date(2020,5,22),minDate:s(),startingDay:1},m.validationOption={blurTrig:!0},m.accessible=!l.isNew,m.save=d,m.count=l.isNew?{}:angular.extend({},l.selectedUser);var p={comUserPosition:{positionName:"",reviewUnit:"",startDate:"",endDate:""},comUserNursing:{reviewUnit:"",unitLevel:"",deptName:"",position:"",startDate:"",endDate:""},comUserEducation:{educationType:"",leaningTime:"",courseTopics:"",courseContent:"",startDate:"",endDate:""},comUserTraining:{learnContent:"",professional:"",diploma:"",speaker:"",creditType:"",credit:"",funding:"",describe:"",startDate:"",endDate:""},comUserLearning:{school:"",professional:"",diploma:"",diplomaNo:"",degree:"",degreeNo:"",describe:"",startDate:"",endDate:""},comUserFamily:{relation:"",name:"",phone:"",email:"",remark:""}};m.addItem=function(e){m.count[e].push(angular.extend({},p[e]))},m.removeItem=function(e,t,a){a?l.deleteUser(e,a).then(function(a){a&&m.count[e].splice(t,1)}):m.count[e].splice(t,1)},m.openCalender=function(e,t){t?t[e]=!0:m[e]=!0},m.scope.$on("resetCount",function(e,t){m.count=t})}e.$inject=["$rootScope","$scope","$uibModalInstance","filesService","$log","moment","toastr","$window","$controller"],angular.module("nqms").config(["w5cValidatorProvider",function(e){e.config({showError:!1,removeError:!0}),e.setRules({userCode:{number:"必须输入数字"},userName:{required:"姓名不能为空"},duty:{required:"职务不能为空"},email:{required:"邮箱不能为空"},phone:{required:"电话不能为空"},positionName:{required:"必填"},reviewUnit:{required:"必填"}})}]).controller("fileModalController",e)}(),function(){"use strict";function e(e,t,a,l,o,s){function n(e,o){function s(e){return"0"===e.data.code?e.data.data:void l.error("获取用户数据失败！\n"+e.data.msg)}function n(e){l.error("获取用户数据失败！\n"+angular.toJson(e.data,!0))}return a.get(t.files.getUserDetailInfo,{params:{userCode:e,hisCode:o}}).then(s)["catch"](n)}function r(e){function o(e){return"0"===e.data.code?(m.userList=e.data.data.lst,m.tableParams=new s({},{dataset:e.data.data.lst}),e.data.data.lst):void l.error("获取用户数据失败！\n"+e.data.msg)}return a.get(t.files.getUserList,{params:{deptCode:e}}).then(o)}function i(e){return m.selectedUser=e,e}function d(e){return a.post(t.files.save,e).then(function(e){return"0"===e.data.code?e:void 0})}function c(e,l){return a.post(t.files["delete"],{dataType:e,delSeqId:l}).then(function(e){return"0"===e.data.code?e:void 0})}var m={selectedUser:{},isNew:!0,selectedDeptCode:"",userList:[],tableParams:null,getUserInfo:n,getUserList:r,setSelectUser:i,add:d,deleteUser:c};return m}e.$inject=["$window","apiHost","$http","$log","$q","NgTableParams"],angular.module("nqms").config(["toastrConfig",function(e){e.tapToDismiss=!0,e.timeOut=0}]).factory("filesService",e)}(),function(){"use strict";function e(e,t,a,l,o,s,n,r){function i(e){u.selectedDept=e,u.selectedUserCode=!1,n.selectedDeptCode=e,n.getUserList(e).then(function(e){a.info("用户数据",e),u.tableParams=n.tableParams})}function d(e){function t(){l.open({templateUrl:"app/nursingWorkers/files/modal.tpl.html",controller:"fileModalController",backdrop:"static",controllerAs:"vm",animation:!0,size:"xlg"})}n.isNew=!e,e?m(e,t):t()}function c(e){n.deleteUser("comUser",e.seqId).then(function(e){e&&(r.success("删除成功","提示"),u.scope.$emit("refreshUserList",u.selectedDept))})}function m(e,t){u.selectedUserCode=e,n.getUserInfo(e,"").then(function(e){p(e,t)})}function p(e,t){u.detail=angular.extend({},e);var a,l=e;for(a in l)l.hasOwnProperty(a)&&b.forEach(function(e){l[a][e]&&(l[a][e]=new Date(l[a][e])),l[a].length>0&&l[a].map(function(t){return t[e]&&(t[e]=new Date(t[e])),t})});n.selectedUser=l,u.rootScope.$broadcast("resetCount",n.selectedUser),t&&t()}var u=this,v=0,b=["birthday","inductionDate","practiceApproveDate","practiceValidDate","graduationDate","startDate","endDate"];u.rootScope=e,u.scope=t,u.isOpen=!0,o.getDeptData().then(function(e){a.info("科室数据",e),u.deptData=e}),a.info(v),u.del=c,u.open=d,u.load=i,u.loadDetail=m,u.tableParams=n.tableParams,u.scope.$on("refreshUserList",function(e,t){i(t)}),u.scope.$on("refreshUserDetail",function(e,t){u.selectedUserCode=t.comUser.userCode,p(t)})}e.$inject=["$rootScope","$scope","$log","$uibModal","deptService","NgTableParams","filesService","toastr"],angular.module("nqms").controller("NursingWorkersFileController",e)}(),function(){"use strict";function e(e,t,a,l){function o(){return t.get(e.events.getEventTypeList).then(s)}function s(e){return"0"===e.data.code?e:void 0}var n={apiHost:e,getEventType:o};return n}e.$inject=["apiHost","$http","$log","toastr"],angular.module("nqms").config(["toastrConfig",function(e){e.tapToDismiss=!0,e.timeOut=0}]).factory("typeService",e)}(),function(){"use strict";function e(e,t,a,l,o){function s(){o.getEventType().then(function(e){e&&(n.lst=e.data.data.lst,n.tableParams=new a({},{dataset:n.lst}))})}var n=this;s()}e.$inject=["$scope","$log","NgTableParams","$filter","typeService"],angular.module("nqms").controller("MalCaseUpTypeController",e)}(),function(){"use strict";function e(e,t,a,l){var o=this;o.lst=[{groupNo:"跌倒",groupName:"不良治疗",bedNo:"Ⅱ级",remark:"跌倒"},{groupNo:"坠床",groupName:"不良治疗",bedNo:"Ⅱ级",remark:"坠床"},{groupNo:"走失",groupName:"不良治疗",bedNo:"Ⅰ级",remark:"走失"},{groupNo:"烫伤",groupName:"不良治疗",bedNo:"Ⅲ级",remark:"烫伤"},{groupNo:"医患争吵",groupName:"医患沟通",bedNo:"Ⅰ级",remark:"医患争吵"},{groupNo:"身体攻击",groupName:"医患沟通",bedNo:"Ⅳ级",remark:"身体攻击"},{groupNo:"咽入异物",groupName:"饮食类",bedNo:"Ⅱ级",remark:"咽入异物"},{groupNo:"食物中毒",groupName:"饮食类",bedNo:"Ⅳ级",remark:"食物中毒"},{groupNo:"仪器故障",groupName:"医疗设备",bedNo:"0级",remark:"仪器故障"},{groupNo:"院内压疮",groupName:"皮肤类",bedNo:"Ⅲ级",remark:"院内压疮"}],t.debug(o.lst),o.tableParams=new a({page:1,count:10},{total:o.lst.length,getData:function(t,a){var s=a.sorting()?l("orderBy")(o.lst,a.orderBy()):o.lst;s=a.filter()?l("filter")(s,a.filter()):s,a.total(s.length),t.resolve(e.users=s.slice((a.page()-1)*a.count(),a.page()*a.count()))}})}e.$inject=["$scope","$log","NgTableParams","$filter"],angular.module("nqms").controller("MalCaseUpStatisticsController",e)}(),function(){"use strict";function e(e,t,a,l,o,s){function n(e){return a.post(t.events.deleteEventLevel,{seqId:e}).then(d)}function r(e){return a.post(t.events.saveEventLevel,e).then(d)}function i(e){return a.get(t.events.getEventLevels,{params:e}).then(d)}function d(e){return"0"===e.data.code?e:void 0}var c={save:r,get:i,del:n};return c}e.$inject=["$window","apiHost","$http","$log","$q","toastr"],angular.module("nqms").factory("levelService",e)}(),function(){"use strict";function e(e,t,a,l,o,s,n){function r(){o.get().then(function(e){e&&(v.lst=e.data.data.lst,v.tableParams=new a({},{dataset:v.lst}))})}function i(e){v.formData=angular.extend({},e),v.selectedLevel=e,e&&e.flow&&(v.formData.flowList=e.flow.split("|"))}function d(){v.formData={}}function c(){""!==v.flowText&&(v.formData.flowList=v.formData.flowList||[],v.formData.flowList.push(v.flowText),v.flowText="")}function m(e){v.formData.flowList.splice(e,1)}function p(){var e=angular.extend({},v.formData);e.flow=e.flowList?e.flowList.join("|"):"",o.save(e).then(function(e){e&&"0"===e.data.code&&(n.success("保存成功！","提示"),r(),v.formData={},s.close("success"))})}function u(e){o.del(e).then(function(t){t&&"0"===t.data.code&&(n.success("已删除！","提示"),r(),e==v.formData.seqId&&(v.formData={}),s.close("success"))})}var v=this;v.save=p,v.edit=i,v.del=u,v.formData={},v.add=d,r(),v.removeFlow=m,v.addFlow=c}e.$inject=["$scope","$log","NgTableParams","$filter","levelService","modalService","toastr"],angular.module("nqms").controller("MalCaseUpLevelController",e)}(),function(){"use strict";function e(e,t,a,l,o,s){function n(e,l){return a.post(t.events.deleteEventReport,{seqId:e,reportCode:l}).then(v)}function r(e){return a.get(t.events.getReportDetail,{params:e}).then(v)}function i(e){return a.get(t.events.getEventMeasures,{params:e}).then(v)}function d(e){return a.get(t.events.getEventRequirement,{params:e}).then(v)}function c(e){return a.post(t.events.saveReportDetail,e).then(v)}function m(e){return a.post(t.events.saveEventMeasures,e).then(v)}function p(e){return a.post(t.events.saveEventRequirement,e).then(v)}function u(e){return a.post(t.events.saveReportDetail,e).then(v)}function v(e){return"0"===e.data.code?e:void 0}function b(e){return a.post(t.events.deleteEventRequirement,e).then(v)}function f(e){return a.post(t.events.deleteEventMeasures,e).then(v)}function g(e){return a.post(t.events.deleteEventReport,e).then(v)}var h={saveReportDetail:c,saveMeasure:m,saveRequirement:p,saveEstimate:u,deleteMeasure:f,deleteRequirement:b,deleteEstimate:g,getReportDetail:r,getEventMeasures:i,getEventRequirement:d,del:n};return h}e.$inject=["$window","apiHost","$http","$log","$q","toastr"],angular.module("nqms").factory("handleService",e)}(),function(){"use strict";function e(e,t,a,l,o,s,n,r,i,d,c,m,p,u){function v(){c.getEventList().then(function(e){e&&(w.lst=e.data.data.lst,w.tableParams=new o({},{dataset:w.lst}))})}function b(e){w.selectedEvent=e,g(e).then(f)}function f(){i.open({templateUrl:"app/malCaseUp/handle/handle.modal.html",size:"lg",appendTo:angular.element(".handle-wrapper"),data:{formData:_,metaData:C},methodsObj:{saveReportDetail:h,saveListItem:function(e,t){var a=this,l=a.upFirstLetter(e),o={};switch(l="Estimate"===l?"Measure":l,o.userCode=n.getFromSession().user.userCode,e){case"requirement":angular.extend(o,{reportCode:a.formData.reportCode,seqId:a.formData[e].seqId||null,reqCode:a.formData[e]&&a.formData[e].reqCode||null,reqContent:a.formData[e].reqContent,remark:""});break;case"measure":a.formData[e].meaTime||(o.meaTime=moment().format("YYYY-MM-DD HH:mm:ss")),angular.extend(o,{seqId:a.formData[e].seqId||null,reportCode:a.formData.reportCode,meaCode:a.formData[e]&&a.formData[e].meaCode||null,meaContent:a.formData[e].meaContent,headUserCode:a.formData[e].headUserCode});break;case"estimate":angular.extend(o,{seqId:a.formData.measure.seqId||null,reportCode:a.formData.reportCode,meaCode:a.formData.measure&&a.formData.measure.meaCode||null,headUserCode:a.formData.measure.headUserCode,meaContent:a.formData.measure.meaContent,resStatus:"",resDescribe:a.formData.measure.resDescribe})}a.formData[e+"List"]||(a.formData[e+"List"]=[]),p["save"+l](o).then(function(t){t&&(d.success("保存成功","提示"),a.rootScope.$broadcast("refresh"+l,a.formData.reportCode,a),a.formData[e]={})})},removeListItem:function(e){var t,a=this,l=a.upFirstLetter(e.listName);switch(a.formData[e.listName+"List"].splice(e.index,1),e.listName){case"measure":t={reportCode:a.reportCode,meaCode:e.meaCode};break;case"requirement":t={seqId:e.seqId};break;case"estimate":return}p["delete"+l](t).then(function(e){e&&d.success("已删除","提示")})},fillItem:function(e,t){var a=this;a.formData[e]=angular.extend({},t)},resetForm:function(e){this.formData[e]={}},upFirstLetter:function(e){return e.replace(/^\w{1}/,function(e){return e.toUpperCase()})}}})}function g(e){var t=e.reportCode,a=n.getFromSession().role.deptCode;_.reportCode=t;var o=u.getUserList(a),s=p.getEventRequirement({reportCode:t}),r=p.getEventMeasures({reportCode:t}),i=p.getReportDetail({reportCode:t}),d=l.all([s,r,i,o]).then(function(t){var a=t[0].data.data.lst,l=t[1].data.data.lst,o={},s=t[3];t[2].data.data.lst.forEach(function(e){o[e.itemCode]={value:e.itemValue,seqId:e.seqId}}),C.malCaseInfo=e,C.userList=s,_.requirementList=a,_.measureList=l,_.reportDetailList=o});return d}function h(){var e,t=this,a=angular.extend({},t.formData.reportDetailList),l=[];for(e in a)a.hasOwnProperty(e)&&l.push({reportCode:t.formData.reportCode,itemCode:e,seqId:a[e].seqId||null,itemValue:a[e].value});p.saveReportDetail(l).then(function(e){e&&"0"===e.data.code&&(d.success("保存成功！","提示"),w.scope.$broadcast("resfreshReportDetail",t.formData.reportCode,t),i.close("success"))})}function D(e,t){r.del(e,t).then(function(e){e&&"0"===e.data.code&&(d.success("已删除！","提示"),v(),i.close("success"))})}function y(e,t,a){p.getEventRequirement({reportCode:t}).then(function(e){e&&(a.formData.requirementList=e.data.data.lst)})}function x(e,t,a){p.getEventMeasures({reportCode:t}).then(function(e){e&&(a.formData.measureList=e.data.data.lst)})}function k(e,t,a){p.getReportDetail({reportCode:t}).then(function(e){e&&(a.formData.reportDetailList=e.data.data.lst)})}var w=this,_={},C={};w.rootScope=e,w.scope=t,w.open=b,w.del=D,v(),w.scope.$on("refreshMeasure",x),w.scope.$on("resfreshRequirement",y),w.scope.$on("resfreshReportDetail",k)}e.$inject=["$rootScope","$scope","$log","$q","NgTableParams","$filter","security","levelService","modalService","toastr","fixService","deptService","handleService","filesService"],angular.module("nqms").controller("MalCaseUpHandleController",e)}(),function(){"use strict";function e(e,t,a,l,o,s,n){function r(e){return a.post(t.events.deleteEventLevel,{seqId:e}).then(c)}function i(e){return a.post(t.events.saveEventLevel,e).then(c)}function d(e){var l=e||{};return l.userCode=n.getFromSession().user.userCode,l.deptCode=n.getFromSession().role.deptCode,a.get(t.events.getEventList,{params:l}).then(c)}function c(e){return"0"===e.data.code?e:void 0}var m={save:i,getEventList:d,del:r};return m}e.$inject=["$window","apiHost","$http","$log","$q","toastr","security"],angular.module("nqms").factory("fixService",e)}(),function(){"use strict";angular.module("nqms").controller("MalCaseUpElementController",["$uibModal","$log",function(e,t){var a=this;a.lst=[{elementCode:"1",elementName:"压疮大小",viewName:"压疮大小",groupName:"压疮信息",elementType:"文本框",width:"3/12",remark:"备注",required:"是"},{elementCode:"2",elementName:"发生时间",viewName:"发生时间",groupName:"压疮信息",elementType:"文本框",width:"3/12",remark:"备注",required:"是"},{elementCode:"3",elementName:"性别",viewName:"性别",groupName:"患者信息",elementType:"单选框",width:"3/12",remark:"备注",required:"是"},{elementCode:"4",elementName:"医疗类型",viewName:"医疗类型",groupName:"患者信息",elementType:"下拉框",width:"3/12",remark:"备注",required:"是"},{elementCode:"5",elementName:"年龄",viewName:"年龄",groupName:"患者信息",elementType:"文本框",width:"3/12",remark:"备注",required:"是"}]}])}(),function(){"use strict";function e(e,t,a,l,o,s){function n(e,l){return a.post(t.events.deleteEventReport,{seqId:e,reportCode:l}).then(i)}function r(e){return a.post(t.events.saveEventReport,e).then(i)}function i(e){return"0"===e.data.code?e:void 0}var d={save:r,del:n};return d}e.$inject=["$window","apiHost","$http","$log","$q","toastr"],angular.module("nqms").factory("callService",e)}(),function(){"use strict";function e(e,t,a,l,o,s,n,r,i,d,c,m,p){function u(){d.getEventList().then(function(e){e&&(x.lst=e.data.data.lst,x.tableParams=new a({},{dataset:x.lst}))}),p.getEventType().then(function(e){e&&(w.eventTypeList=e.data.data.lst)})}function v(e){function t(){r.open({templateUrl:"app/malCaseUp/call/call.modal.html",size:"lg",ok:D,data:{formData:k,metaData:w},methodsObj:{eventTimeCalender:function(){var e=this;e.eventTimeOpen=!0},setUser:function(e){var t=this;t.formData.flowList.splice(e,1)}}})}k=angular.extend({},e),x.selectedLevel=e,w.deptList=m.deptList&&m.deptList.belongedDepts,b().then(function(){w.deptList?t():m.getDeptData().then(function(e){var a=e;a&&(w.deptList=a.belongedDepts,0===w.deptList.length&&(delete a.belongedDepts,w.deptList=[a]),t())})}),k.eventDate=new Date(e.eventTime),k.eventTime=new Date(e.eventTime),k.level={damageLevel:e.damageLevel},k.dept={deptCode:e.deptCode,deptName:e.deptName},k.eventType={eventTypeCode:e.eventTypeCode,eventTypeName:e.eventTypeName},k.userCode=o.getFromSession().user.userCode,k.userCode=o.getFromSession().user.userName}function b(){return n.get().then(function(e){e&&(w.levelList=e.data.data.lst)})}function f(){x.formData={}}function g(){""!==x.flowText&&(x.formData.flowList=x.formData.flowList||[],x.formData.flowList.push(x.flowText),x.flowText="")}function h(e){x.formData.flowList.splice(e,1)}function D(e){var t,a,l=angular.extend({},e);l.deptName=l.dept.deptName,t=s(l.eventDate).format("YYYY-MM-DD"),a=s(l.eventTime).format("HH:mm:ss"),delete l.eventDate,delete l.dept,l.eventTypeCode=angular.fromJson(l.eventType).eventTypeCode,l.eventTypeName=angular.fromJson(l.eventType).eventTypeName,delete l.eventType,delete l.level,l.eventTime=s(t+" "+a).format("YYYY-MM-DD HH:mm:ss"),c.save(l).then(function(e){e&&"0"===e.data.code&&(i.success("保存成功！","提示"),u(),x.formData={},r.close("success"))})}function y(e,t){c.del(e,t).then(function(e){e&&"0"===e.data.code&&(i.success("已删除！","提示"),u(),r.close("success"))})}var x=this,k={},w={};x.save=D,x.open=v,x.del=y,x.add=f,w.eventTypeList=[{code:1,name:"运送中病情变化"},{code:2,name:"误吸"},{code:3,name:"院内压疮"},{code:4,name:"坠床"},{code:5,name:"跌倒"}],u(),x.removeFlow=h,x.addFlow=g}e.$inject=["$scope","$log","NgTableParams","$filter","security","moment","levelService","modalService","toastr","fixService","callService","deptService","typeService"],angular.module("nqms").controller("MalCaseUpCallController",e)}(),function(){"use strict";function e(){function e(e,t,a,l,o){var s=this,n=o.currentUser.tab;s.isActive=e.$parent.isActive,s.navData=o.getFromSession().nav,s.addToBread=function(e){var t=angular.element(e.currentTarget).data("id"),l=angular.element(e.currentTarget).data("name");o.addToBreadcrumb(t,l),a.info("bread 服务",n)}}e.$inject=["$scope","$window","$log","$location","security"];var t={restrict:"E",templateUrl:"app/components/navbar/navbar.html",scope:{},replace:!0,controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("nqms").directive("acmeNavbar",e)}(),function(){"use strict";function e(){function e(e,t,a,l,o,s,n,r){function i(){a.open({templateUrl:"app/components/header/changeUser.tpl.html",controller:"ChangeUserController",controllerAs:"vm",backdrop:"static",animation:!1,size:"sm"})}function d(){a.open({templateUrl:"app/components/header/changeRole.tpl.html",controller:"ChangeRoleController",controllerAs:"vm",backdrop:"static",animation:!1,size:"md"})}var c=this;c.openUserDialog=i,c.openRoleDialog=d,c.logout=r.logout,t(function(){c.time_now=l().format("YYYY年MM月DD日 	HH:mm:ss")},1e3),c.user=r.getFromSession().user,s.info(c.user)}e.$inject=["$scope","$interval","$uibModal","moment","$window","$log","$location","security"];var t={restrict:"E",templateUrl:"app/components/header/header.html",scope:{},replace:!0,controller:e,controllerAs:"hd",bindToController:!0};return t}angular.module("nqms").directive("acmeHeader",e)}(),function(){"use strict";function e(e,t,a,l,o,s,n,r){function i(){e.dismiss("cancel")}function d(){c.loginBtnStatus.title="切换",c.loginBtnStatus.state=""}var c=this;c.cancel=i,c.formData={},c.datepickerOption={dateDisabled:"disabled",formatYear:"yyyy",formatMonth:"MM",formatDay:"dd",initDate:new Date,maxDate:new Date(2020,5,22),minDate:o(),startingDay:1},c.validationOption={blurTrig:!0},c.loginBtnStatus={title:"切换",state:""},c.changeUser=function(o){var i=a.getFromSession().user;return l.info(o),c.loginBtnStatus.title="正在切换...",c.loginBtnStatus.state="disabled",o.loginName===i.loginName?(r.info("您切换的用户已是当前登录用户，无需切换～","提示"),void d()):void a.login(o).then(function(a){d(),a&&"-1"==a.data.code||(e.dismiss("cancel"),n(function(){t.path("/home"),s.location.reload()},2e3))},d)}}e.$inject=["$uibModalInstance","$location","security","$log","moment","$window","$timeout","toastr"],angular.module("nqms").config(["w5cValidatorProvider",function(e){e.setRules({loginName:{required:"用户名不能为空",pattern:"用户名必须输入字母、数字、下划线"},password:{required:"密码不能为空",minlength:"密码长度不能小于{minlength}",maxlength:"密码长度不能大于{maxlength}"}})}]).controller("ChangeUserController",e)}(),function(){"use strict";function e(e,t,a,l,o,s,n){function r(){e.dismiss("cancel")}function i(){d.roleBtnStatus.title="切换",d.roleBtnStatus.state=""}var d=this,c=n.getFromSession().role,m=n.getFromSession().user.seqId;d.currentRole=n.getFromSession().role,d.cancel=r,d.formData={},d.datepickerOption={dateDisabled:"disabled",formatYear:"yyyy",formatMonth:"MM",formatDay:"dd",initDate:new Date,maxDate:new Date(2020,5,22),minDate:a(),startingDay:1},d.validationOption={blurTrig:!0},d.roleBtnStatus={title:"切换",state:""},n.getUserRoleList({userId:m}).then(function(e){d.userRoleList=e.data.data}),d.selectedRole=c,d.showRole=function(e){t.info(e),d.changedRole=e},d.changeRole=function(){return c=n.getFromSession().role,d.changedRole?(d.roleBtnStatus.title="正在切换...",d.roleBtnStatus.state="disabled",d.changedRole.seqId===c.seqId?(o.info("您切换的角色已是当前登录的角色，无需切换～","提示"),void i()):void n.changeRole(d.changedRole)):void 0}}e.$inject=["$uibModalInstance","$log","moment","$window","toastr","$scope","security"],angular.module("nqms").controller("ChangeRoleController",e)}(),function(){"use strict";function e(){function e(e,t,a,l,o,s,n,r){var i=this;i.isActive=e.isActive,i.tabTemp=r.currentUser.tab,i.removeTab=function(e){var t,a=angular.element(e.currentTarget).data("id"),l=angular.element(e.currentTarget).parents("li").prev(),o=angular.element(e.currentTarget).parents("li").next();
t=l.length>0?"."+l.find("a").data("id"):o.length>0?"."+o.find("a").data("id"):"",angular.element(e.currentTarget).parents(".tab-bread__item").hasClass("active")&&n.go("home"+t),r.removeFromBreadcrumb(a)},i.isActive=function(e){var t=e.length;return e===s.path().substr(-t,t)},o.info("tab:",i.tab)}e.$inject=["$scope","$interval","moment","$window","$log","$location","$state","security"];var t={restrict:"E",templateUrl:"app/components/breadcrumb/breadcrumb.html",scope:{},replace:!0,controller:e,controllerAs:"bc",bindToController:!0};return t}angular.module("nqms").directive("acmeBread",e)}(),function(){"use strict";function e(e,t,a,l,o,s,n,r,i){function d(e){p(e).then(function(e){"0"===e.data.code?(o.success("正在切换角色...","恭喜"),i.go("home"),r(function(){l.location.reload()},2e3)):o.error("网络或数据错误，请联系管理员～","警告")})}function c(l){var r=s.defer();return t.post(e.system.login,l).then(function(e){var t,l=e.data.data;return"-1"==e.data.code?(o.error(e.data.msg),e):(t={user:l.user,nav:l.funs,role:l.role,tab:{}},y.saveAtSession("userInfo",t),r.resolve(t),a.info(e),o.success("登录成功！"),n.path("/home"),y.currentUser=t,void y.saveAtSession("isLogined",!0))},function(e){r.reject(e)})}function m(){y.removeFromSession("isLogined"),y.removeFromSession("userInfo"),n.path("/login")}function p(a){var l=y.getFromSession();return t.get(e.system.getNavigation,{params:{roleCode:a.roleCode,userRoleId:a.seqId}}).then(function(e){return"0"===e.data.code&&(l.nav=e.data.data,l.role=a,l.tab={},v("userInfo",l)),e})}function u(e){l.sessionStorage.setItem("userInfo",angular.toJson(e))}function v(e,t){var a=t;(angular.isObject(t)||angular.isArray(t))&&(a=angular.toJson(t)),l.sessionStorage.setItem(e,a)}function b(e){var t=e;return e||(t="userInfo"),angular.fromJson(l.sessionStorage.getItem(t))}function f(e){if("string"!=typeof e)throw"key必须是字符串";l.sessionStorage.removeItem(e)}function g(e,t){y.currentUser.tab[e]=t,u(y.currentUser)}function h(e){delete y.currentUser.tab[e],u(y.currentUser)}function D(l){return t.get(e.system.getRoleList,{params:l}).then(function(e){return y.roleList=e.data.data,"0"===e.data.code?e:void 0})["catch"](function(e){a.error("获取角色失败",e)})}var y={currentUser:function(){return b()||{}}(),roleList:[],changeRole:d,removeFromSession:f,resetUserInfo:u,saveAtSession:v,getFromSession:b,getUserRoleList:D,getNavigation:p,addToBreadcrumb:g,removeFromBreadcrumb:h,login:c,logout:m};return y}e.$inject=["apiHost","$http","$log","$window","toastr","$q","$location","$timeout","$state"],angular.module("nqms").factory("security",e)}(),function(){"use strict";function e(e,t,a,l,o){function s(){n||(n=o.get("toastr"))}var n;angular.fromJson(a.sessionStorage.getItem("isLogined"));return{request:function(t){return e.info("请求结果："+t.url,t),s(),t||l.when(t)},requestError:function(t){return e.info("请求失败："+t.statusText,t),s(),n.error("请检查网络连接或联系服务器管理员！","请求错误"),l.reject(t)},response:function(t){var a=o.get("security");return e.info("响应结果："+t.config.url,t),-2==t.data.code&&a.logout(),-1==t.data.code&&(s(),n.error(t.data.msg+"<br>错误码：-1","操作不成功！")),t||l.when(t)},responseError:function(t){return e.info("响应失败："+t.statusText,t),s(),n.error("错误码："+t.status+"<br> URL："+(t.config&&t.config.url||"")+"\n "+t.message+"请检查网络连接或联系服务器管理员！","没有响应"),l.reject(t)}}}e.$inject=["$log","$location","$window","$q","$injector"],angular.module("nqms").factory("myHttpInterceptor",e)}(),function(){"use strict";function e(e,t,a,l,o,s){function n(){function e(e){return"0"===e.data.code?(r.deptCode||(i.deptList=e.data.data),e.data.data):void l.error("获取科室数据失败！\n"+e.data.msg)}function o(e){l.error("获取科室数据失败！\n"+angular.toJson(e.data,!0))}return t.get(a.user.getDept,{params:{deptCode:r.deptCode}}).then(e)["catch"](o)}var r=s.getFromSession().role,i={apiHost:a,getDeptData:n,deptList:[]};return i}e.$inject=["$window","$http","apiHost","$log","toastr","security"],angular.module("nqms").factory("deptService",e)}(),function(){"use strict";function e(e,t){function a(a,l,o){t.info("scope",a),a.isLoading=function(){return e.pendingRequests.length>0},a.$watch(a.isLoading,function(e){e?l[0].setAttribute("style","display: block"):l[0].setAttribute("style","display: none")})}var l={restrict:"E",templateUrl:"app/common/loading/loading.tpl.html",link:a,scope:{},controller:function(e,t){var a=this;t.info("windowWidth:",e),a.loadingWidth=e.innerWidth-200},controllerAs:"vm"};return l}e.$inject=["$http","$log"],angular.module("nqms").directive("loading",e)}(),function(){"use strict";function e(e,t){return{open:function(t){e.open({templateUrl:t.templateUrl,size:t.size,backdrop:"static",appendTo:t.appendTo,animation:t.animation||!0,controller:"ModalController",controllerAs:"vm",resolve:{initFn:function(){return t.initFn},ok:function(){return t.ok},data:function(){return t.data?t.data:void 0},methodsObj:function(){return t.methodsObj?t.methodsObj:void 0}}})},close:function(e){t.dismissAll(e)}}}e.$inject=["$uibModal","$uibModalStack"],angular.module("nqms").factory("modalService",e)}(),function(){"use strict";function e(e,t,a,l,o,s,n){var r=this;if(r.rootScope=e,r.scope=t,r.formData=o&&o.formData,r.metaData=o&&o.metaData,angular.isObject(s))for(var i in s)"function"==typeof s[i]&&(r[i]=s[i]);else s&&$log.error("methodsObj必须是对象!");n&&n(r),r.ok=function(){l(r.formData)},r.cancel=function(){a.dismiss("cancel")}}e.$inject=["$rootScope","$scope","$uibModalInstance","ok","data","methodsObj","initFn"],angular.module("nqms").controller("ModalController",e)}(),function(){"use strict";function e(e,t,a,l,o,s,n){var r,i=this;a.isActive=i.isActive=function(e){var t,a=0;return""===e?!1:(a=e.length,t=o.path().substr(-a,a),e===t)},t.$on("$stateChangeStart",function(e,t,a,l,o,s){r=n.getFromSession("isLogined"),"login"===t.name&&r&&e.preventDefault()})}e.$inject=["$log","$rootScope","$scope","$uibModal","$location","$window","security"],angular.module("nqms").controller("MainController",e)}(),function(){"use strict";function e(e,t){function a(){l.loginBtnStatus.title="登录",l.loginBtnStatus.state=""}var l=this;l.loginBtnStatus={title:"登录",state:""},l.login=function(e){l.loginBtnStatus.title="正在登录...",l.loginBtnStatus.state="disabled",t.login(e).then(a,a)},l.validationOption={blurTrig:!0}}e.$inject=["$log","security"],angular.module("nqms").config(["w5cValidatorProvider",function(e){e.setRules({loginName:{required:"用户名不能为空",pattern:"用户名必须输入字母、数字、下划线"},password:{required:"密码不能为空",minlength:"密码长度不能小于{minlength}",maxlength:"密码长度不能大于{maxlength}"}})}]).controller("LoginController",e)}(),function(){"use strict";function e(e,t,a){var l=angular.fromJson(t.sessionStorage.getItem("isLogined"));return e.debug("runBlock end"),l?void 0:void a.path("/login")}e.$inject=["$log","$window","$location"],angular.module("nqms").run(e)}(),function(){"use strict";function e(e,t,a){e.state("home",{url:"/home",templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main"}).state("home.files",{url:"/files",templateUrl:"app/nursingWorkers/files/files.tpl.html",controller:"NursingWorkersFileController",controllerAs:"vm"}).state("home.internship",{url:"/internship",templateUrl:"app/nursingWorkers/internship/internship.tpl.html",controller:"NursingWorkersInternshipController",controllerAs:"vm"}).state("home.graduate",{url:"/graduate",templateUrl:"app/nursingWorkers/graduate/graduate.tpl.html",controller:"NursingWorkersGraduateController",controllerAs:"vm"}).state("home.technical",{url:"/technical",templateUrl:"app/nursingWorkers/technical/technical.tpl.html",controller:"NursingWorkersTechnicalController",controllerAs:"vm"}).state("home.ulteriorly",{url:"/ulteriorly",templateUrl:"app/nursingWorkers/ulteriorly/ulteriorly.tpl.html",controller:"NursingWorkersUlteriorlyController",controllerAs:"vm"}).state("home.nursingAttemper",{url:"/attemper",templateUrl:"app/nursingWorkers/attemper/attemper.tpl.html",controller:"NursingWorkersAttemperController",controllerAs:"vm"}).state("home.nursingStatistics",{url:"/statistics",templateUrl:"app/nursingWorkers/statistics/statistics.tpl.html",controller:"NursingWorkersStatisticsController",controllerAs:"vm"}).state("home.bed",{url:"/bed",templateUrl:"app/departmentManager/bed/bed.tpl.html",controller:"DepartmentManagerBedController",controllerAs:"vm"}).state("home.classes",{url:"/classes",templateUrl:"app/departmentManager/classes/classes.tpl.html",controller:"DepartmentManagerClassesController",controllerAs:"vm"}).state("home.endemicArea",{url:"/endemicArea",templateUrl:"app/departmentManager/endemicArea/endemicArea.tpl.html",controller:"DepartmentManagerEndemicAreaController",controllerAs:"vm"}).state("home.turns",{url:"/turns",templateUrl:"app/departmentManager/turns/turns.tpl.html",controller:"DepartmentManagerTurnsController",controllerAs:"vm"}).state("home.turnsRule",{url:"/turnsRule",templateUrl:"app/departmentManager/turnsRule/turnsRule.tpl.html",controller:"DepartmentManagerTurnsRuleController",controllerAs:"vm"}).state("home.leave",{url:"/leave",templateUrl:"app/departmentManager/leave/leave.tpl.html",controller:"DepartmentManagerLeaveController",controllerAs:"vm"}).state("home.departmentAttemper",{url:"/attemper",templateUrl:"app/departmentManager/attemper/attemper.tpl.html",controller:"DepartmentManagerAttemperController",controllerAs:"vm"}).state("home.departmentStatistics",{url:"/statistics",templateUrl:"app/departmentManager/statistics/statistics.tpl.html",controller:"DepartmentManagerStatisticsController",controllerAs:"vm"}).state("home.type",{url:"/type",templateUrl:"app/malCaseUp/type/type.tpl.html",controller:"MalCaseUpTypeController",controllerAs:"vm"}).state("home.call",{url:"/call",templateUrl:"app/malCaseUp/call/call.tpl.html",controller:"MalCaseUpCallController",controllerAs:"vm"}).state("home.level",{url:"/level",templateUrl:"app/malCaseUp/level/level.tpl.html",controller:"MalCaseUpLevelController",controllerAs:"vm"}).state("home.handle",{url:"/handle",templateUrl:"app/malCaseUp/handle/handle.tpl.html",controller:"MalCaseUpHandleController",controllerAs:"vm"}).state("home.handle.malCase",{url:"/malCase",templateUrl:"app/malCaseUp/handle/malCaseInfo.tpl.html"}).state("home.handle.report",{url:"/report",templateUrl:"app/malCaseUp/handle/report.tpl.html"}).state("home.handle.requirement",{url:"/requirement",templateUrl:"app/malCaseUp/handle/requirement.tpl.html"}).state("home.handle.measures",{url:"/measures",templateUrl:"app/malCaseUp/handle/measures.tpl.html"}).state("home.handle.estimate",{url:"/estimate",templateUrl:"app/malCaseUp/handle/estimate.tpl.html"}).state("home.fix",{url:"/fix",templateUrl:"app/malCaseUp/handle/handle.tpl.html",controller:"MalCaseUpHandleController",controllerAs:"vm"}).state("home.element",{url:"/element",templateUrl:"app/malCaseUp/element/element.tpl.html",controller:"MalCaseUpElementController",controllerAs:"vm"}).state("malCaseUpStatistics",{url:"/statistics",templateUrl:"app/malCaseUp/statistics/statistics.tpl.html",controller:"MalCaseUpStatisticsController",controllerAs:"vm"}).state("home.roles",{url:"/roles",templateUrl:"app/system/roles/roles.tpl.html",controller:"RolesController",controllerAs:"vm"}).state("home.users",{url:"/users",templateUrl:"app/system/users/users.tpl.html",controller:"UsersController",controllerAs:"vm"}).state("login",{url:"/login",templateUrl:"app/login/login.html"}),t.otherwise("/login")}e.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"],angular.module("nqms").config(e)}(),function(){"use strict";angular.module("nqms").constant("moment",moment).constant("apiHost",function(){var e="/mnisqm";return{system:{login:e+"/system/login",getRoleList:e+"/system/getRoleLst",getNavigation:e+"/system/getFunction"},user:{getDept:e+"/user/getUserDepts"},files:{getUserList:e+"/user/getUserList",getUserDetailInfo:e+"/user/getUserDetailInfo",add:e+"/user/insertObj","delete":e+"/user/deleteUserInfo",update:e+"/user/updateObj",save:e+"/user/saveComUser"},roles:{getNotHaveFunction:e+"/system/getNotHaveFunction",getFunction:e+"/system/getFunction",getHaveFunction:e+"/system/getHaveFunction",updateRole:e+"/system/saveSysRoleFuns",deleteRole:e+"/system/deleteRole",saveRole:e+"/system/saveRole"},users:{getUserList:e+"/system/getSysUserList",deleteUser:e+"/system/deleteSysUser",deleteUserRole:e+"/system/deleteSysUserRole",saveUserRole:e+"/system/saveSysUserRole",saveUser:e+"/system/saveSysUser"},events:{getEventTypeList:e+"/event/getEventTypeList",getEventList:e+"/event/getEventList",getEventReport:e+"/event/getEventReport",saveEventReport:e+"/event/saveEventReport",deleteEventReport:e+"/event/deleteEventReport",getReportDetail:e+"/event/getReportDetail",saveReportDetail:e+"/event/saveReportDetail",saveEventRequirement:e+"/event/saveEventRequirement",getEventRequirement:e+"/event/getEventRequirement",deleteEventRequirement:e+"/event/deleteEventRequirement",saveEventMeasures:e+"/event/saveEventMeasures",getEventMeasures:e+"/event/getEventMeasures",deleteEventMeasures:e+"/event/deleteEventMeasures",saveEventLevel:e+"/event/saveEventLevel",getEventLevels:e+"/event/getEventLevels",deleteEventLevel:e+"/event/deleteEventLevel"}}}())}(),function(){"use strict";function e(e,t,a,l){e.debugEnabled(!0),t.autoDismiss=!0,t.allowHtml=!0,t.timeOut=3e3,t.positionClass="toast-top-center",t.progressBar=!1,t.preventOpenDuplicates=!0,t.position="toast-top-center",t.iconClasses={error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},a.config({blurTrig:!0,showError:!0,removeError:!0}),l.interceptors.push("myHttpInterceptor")}e.$inject=["$logProvider","toastrConfig","w5cValidatorProvider","$httpProvider"],angular.module("nqms").config(e)}(),angular.module("nqms").run(["$templateCache",function(e){e.put("app/login/login.html",'<div class="center-bg" ng-controller="LoginController as vm"><div class="left-bg"></div><div class="w"><div class="login-wrapper"><div class="logo-nurse"></div><div class="login-box"><div class="login-box__header">用户登录</div><form class="login-box__form form-wrapper w5c-form" novalidate="" w5c-form-validate="vm.validationOption" name="loginForm"><div class="err-wrapper"></div><div class="form-item form-item__sm"><label class="name-label"><span class="fa fa-user"></span></label> <input autocomplete="off" ng-pattern="/^[0-9A-Za-z_]{1,19}$/" required="" type="text" ng-model="vm.formData.loginName" name="loginName" class="form-ctr input" id="user-name" placeholder="用户名"></div><div class="form-item form-item__sm"><label class="name-label" for="password"><span class="fa fa-lock"></span></label> <input autocomplete="off" type="password" required="" name="password" ng-model="vm.formData.password" class="form-ctr input" id="password" placeholder="密码"></div><div class="submit-wrapper form-item"><button w5c-form-submit="vm.login(vm.formData)" class="btn login-btn btn-default {{vm.loginBtnStatus.state}}">{{vm.loginBtnStatus.title}}</button></div><div class="reset-password"><a href="javascript:;">重置</a></div></form></div></div></div></div>'),e.put("app/main/main.html",'<div class="container-fluid full-screen"><acme-header></acme-header><acme-navbar></acme-navbar><acme-bread></acme-bread><div class="main-body container-fluid" ui-view=""></div></div>'),e.put("app/role/role.tpl.html",'<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>Title</title></head><body></body></html>'),e.put("app/common/loading/loading.tpl.html",'<div class="loading-wrapper" ng-style="{width: vm.loadingWidth}"><div class="spinner"><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div></div></div>'),e.put("app/common/tpls/loading.tpl.html",'<div class="loading-wrapper" ng-style="{width: vm.loadingWidth}"><div class="spinner"><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div></div></div>'),e.put("app/components/breadcrumb/breadcrumb.html",'<div class="tab-bread-wrapper"><ul class="tab-bread"><li ng-repeat="(id, name) in bc.tabTemp"><div ui-sref=".{{id}}" ui-sref-active="active" ng-class="{active: bc.isActive(\'{{id}}\')}" class="tab-bread__item" href="#"><span>{{name}}</span> <a ng-click="bc.removeTab($event)" data-id="{{id}}" class="close-tab" href="javascript:;">×</a></div></li></ul></div>'),e.put("app/components/header/changeRole.tpl.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">切换角色</h5></div><div class="modal-body">您的现有角色：<table class="table table-condensed table-bordered table-striped"><tr><th></th><th>角色编号</th><th>角色名称</th><th>所属部门</th></tr><tr ng-repeat="row in vm.userRoleList" ng-class="{success: row.seqId === vm.currentRole.seqId, active: row.seqId === vm.selectedRole.seqId}"><td><input id="{{row.seqId}}" name="userRole" ng-click="vm.showRole(row)" type="radio" value="{{row.seqId}}" ng-model="vm.selectedRole.seqId"></td><td data-title="\'角色编号\'"><label for="{{row.seqId}}">{{row.roleCode}}</label></td><td data-title="\'角色名称\'"><label for="{{row.seqId}}">{{row.roleName}}</label></td><td data-title="\'所属部门\'"><label for="{{row.seqId}}">{{ row.deptName }}</label></td></tr></table></div><div class="modal-footer"><button class="btn btn-sm btn-success {{vm.roleBtnStatus.state}}" type="button" {{vm.loginbtnstatus.state}}="" ng-click="vm.changeRole()">{{vm.roleBtnStatus.title}}</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div>'),e.put("app/components/header/changeUser.tpl.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">切换用户</h5></div><form class="form w5c-form login-box__form change-user-form" novalidate="" w5c-form-validate="vm.validationOption" name="changeUserForm"><div class="modal-body"><div class="form-item form-item__sm"><label class="name-label"><span class="fa fa-user"></span></label> <input autocomplete="off" ng-pattern="/^[0-9A-Za-z_]{1,19}$/" required="" type="text" ng-model="vm.formData.loginName" name="loginName" class="form-ctr input" id="user-name" placeholder="用户名"></div><div class="form-item form-item__sm"><label class="name-label" for="password"><span class="fa fa-lock"></span></label> <input autocomplete="off" type="password" required="" name="password" ng-model="vm.formData.password" class="form-ctr input" id="password" placeholder="密码"></div></div><div class="modal-footer"><button class="btn btn-sm btn-success {{vm.loginBtnStatus.state}}" type="button" {{vm.loginbtnstatus.state}}="" w5c-form-submit="vm.changeUser(vm.formData)">{{vm.loginBtnStatus.title}}</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form></div>'),e.put("app/components/header/header.html",'<div class="header-top"><div class="logo-wrapper pull-left"><a href="/" class="logo"></a></div><div class="header-right pull-right"><div class="header-item time-now"><i class="fa fa-calendar"></i> {{hd.time_now}}</div><div class="header-item messages"><div class="btn-group" uib-dropdown="" is-open="msg.isopen"><button id="msg-button" type="button" class="btn btn-default" uib-dropdown-toggle="" ng-disabled="disabled"><i class="fa fa-bell"></i> 消息 <i class="fa fa-chevron-down"></i></button><ul uib-dropdown-menu="" role="menu" aria-labelledby="msg-button"><li><a href="">账号信息</a></li><li><a href="">账号信息</a></li><li><a href="">账号信息</a></li><li><a href="">账号信息</a></li></ul></div></div><div class="header-item user"><div class="btn-group" uib-dropdown="" is-open="user.isopen"><button id="user-button" type="button" class="btn btn-default" uib-dropdown-toggle="" ng-disabled="disabled"><i class="fa fa-user"></i> {{hd.user.loginName}} <span class="fa fa-chevron-down"></span></button><ul uib-dropdown-menu="" role="menu" aria-labelledby="user-button"><li><a href="javascript:;"><i class="fa fa-exclamation-circle"></i> 账号信息</a></li><li><a href="javascript:;" ng-click="hd.openRoleDialog()"><i class="fa fa-exchange"></i> <span>切换角色</span></a></li><li><a href="javascript:;" ng-click="hd.openUserDialog()"><i class="fa fa-users"></i> <span>切换用户</span></a></li><li><a ng-click="hd.logout()" href="javascript:;"><i class="fa fa-sign-out"></i> <span>退出系统</span></a></li></ul></div></div></div></div>'),e.put("app/components/navbar/navbar.html",'<div class="left-nav"><div class="nav-wrapper"><uib-accordion class="nav-menu"><uib-accordion-group panel-class="nav-menu_item" ng-repeat="item in vm.navData" data-title="{{item.funUrl}}" is-open="item.isOpen"><uib-accordion-heading><i class="fa fa-{{item.icoName}} nav-menu_item-icon"></i> <span class="nav-menu_item-text">{{item.funName}}</span> <i class="pull-right fa" ng-class="{\'fa-angle-down\': item.isOpen, \'fa-angle-right\': !item.isOpen}"></i></uib-accordion-heading><ul class="nav-menu_sub-item"><li ng-repeat="subItem in item.child"><a ui-sref-active="active" ng-class="{active: vm.isActive(\'{{subItem.funUrl}}\')}" data-id="{{subItem.funUrl}}" data-name="{{subItem.funName}}" ng-click="vm.addToBread($event)" ui-sref=".{{subItem.funUrl}}">{{subItem.funName}}</a></li></ul></uib-accordion-group></uib-accordion></div></div>'),e.put("app/departmentManager/attemper/attemper.tpl.html",'<div ng-controller="DepartmentManagerAttemperController as vm"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-eye-slash"></i> <span>床位分组管理</span><div class="pull-right"><button class="btn btn-xs btn-primary">新增床号</button></div></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in vm.lst"><td data-title="\'部门名称\'">{{row.deptName}}</td><td data-title="\'床号\'">{{row.bedNo}}</td><td data-title="\'所属组\'">{{row.group}}</td></tr></table><div class="pull-right"><button class="btn btn-xs btn-primary">保存</button></div></div></div></div>'),e.put("app/departmentManager/bed/bed.tpl.html",'<div ng-controller="DepartmentManagerBedController as vm"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-eye-slash"></i> <span>床位分组管理</span><div class="pull-right"><button class="btn btn-xs btn-primary">新增床号</button></div><div class="pull-right col-md-3"><label>所属组:</label> <input> <button class="btn btn-xs btn-primary">筛选</button></div></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in vm.lst"><td data-title="\'部门名称\'">{{row.deptName}}</td><td data-title="\'床号\'">{{row.bedNo}}</td><td data-title="\'所属组\'">{{row.group}}</td></tr></table><div class="pull-right"><button class="btn btn-xs btn-primary">保存</button></div></div></div></div>'),e.put("app/departmentManager/classes/classes.tpl.html",'<div ng-controller="DepartmentManagerClassesController as vm"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-backward"></i> <span>班次管理</span><div class="pull-right"><button class="btn btn-xs btn-primary">新增班次</button></div></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in vm.lst"><td data-title="\'班次序号\'">{{row.index}}</td><td data-title="\'部门名称\'">{{row.deptName}}</td><td data-title="\'班次名称\'">{{row.name}}</td><td data-title="\'描述\'">{{row.remark}}</td><td data-title="\'起始时间\'">{{row.start}}</td><td data-title="\'结束时间\'">{{row.end}}</td><td data-title="\'所需人数\'">{{row.persons}}</td><td data-title="\'护士要求\'">{{row.yy}}</td></tr></table><div class="pull-right"><button class="btn btn-xs btn-primary">保存</button></div></div></div></div>'),e.put("app/departmentManager/endemicArea/endemicArea.tpl.html",'<div ng-controller="DepartmentManagerEndemicAreaController as vm"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-eye-slash"></i> <span>病区护理人员管理</span></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in vm.lst"><td data-title="\'姓名\'">{{row.deptName}}</td><td data-title="\'工号\'">{{row.bedNo}}</td><td data-title="\'所属护理组\'">{{row.group}}</td><td data-title="\'护士级别\'">{{row.level}}</td><td data-title="\'是否夜班准入\'">{{row.yb}}</td></tr></table><div class="pull-right"><button class="btn btn-xs btn-primary">保存</button></div></div></div></div>'),e.put("app/departmentManager/leave/leave.tpl.html",'<div ng-controller="DepartmentManagerLeaveController as vm"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-eye-slash"></i> <span>请假管理</span></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in vm.lst"><td data-title="\'部门名称\'">{{row.deptName}}</td><td data-title="\'员工姓名\'">{{row.name}}</td><td data-title="\'所属组\'">{{row.group}}</td><td data-title="\'起始时间\'">{{row.start}}</td><td data-title="\'结束时间\'">{{row.end}}</td><td data-title="\'请假原因\'">{{row.yy}}</td><td data-title="\'审批状态\'">{{row.status}}</td><td data-title="\'备注\'">{{row.remark}}</td><td data-title="\'操作\'"><button class="btn btn-xs btn-primary"><span class="fa fa-pencil"></span></button></td></tr></table><div class="pull-right"><button class="btn btn-xs btn-primary">保存</button></div></div></div></div>'),e.put("app/departmentManager/statistics/statistics.tpl.html",'<div ng-controller="DepartmentManagerStatisticsController as vm"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-eye-slash"></i> <span>床位分组管理</span><div class="pull-right"><button class="btn btn-xs btn-primary">新增床号</button></div></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in vm.lst"><td data-title="\'部门名称\'">{{row.deptName}}</td><td data-title="\'床号\'">{{row.bedNo}}</td><td data-title="\'所属组\'">{{row.group}}</td></tr></table><div class="pull-right"><button class="btn btn-xs btn-primary">保存</button></div></div></div></div>'),e.put("app/departmentManager/turns/turns.tpl.html",'<div ng-controller="DepartmentManagerTurnsController as vm"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-eye-slash"></i> <span>排班管理</span><div class="pull-right"><button class="btn btn-xs btn-primary">新增排班</button></div></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in vm.lst"><td data-title="\'员工姓名\'">{{row.name}}</td><td data-title="\'2016-04-04(周一)\'">{{row.d1}}</td><td data-title="\'2016-04-05(周二)\'">{{row.d2}}</td><td data-title="\'2016-04-06(周三)\'">{{row.d3}}</td><td data-title="\'2016-04-07(周四)\'">{{row.d4}}</td><td data-title="\'2016-04-08(周五)\'">{{row.d5}}</td><td data-title="\'2016-04-09(周六)\'">{{row.d6}}</td><td data-title="\'2016-04-10(周七)\'">{{row.d7}}</td><td data-title="\'出勤统计\'">{{row.group}}</td></tr></table><div class="pull-right"><button class="btn btn-xs btn-primary">重新排班</button> <button class="btn btn-xs btn-primary">复制上周</button> <button class="btn btn-xs btn-primary">保存</button></div></div></div></div>'),e.put("app/departmentManager/turnsRule/turnsRule.tpl.html",'<div ng-controller="DepartmentManagerTurnsRuleController as vm"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-eye-slash"></i> <span>排班规则管理</span><div class="pull-right"><button class="btn btn-xs btn-primary">新增规则</button></div></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in vm.lst"><td data-title="\'规则序号\'">{{row.ruleIndex}}</td><td data-title="\'规则信息\'">{{row.ruleInfo}}</td><td data-title="\'起始时间\'">{{row.start}}</td><td data-title="\'结束时间\'">{{row.end}}</td><td data-title="\'是否有效\'">{{row.valid}}</td><td data-title="\'对谁有效\'">{{row.user}}</td><td data-title="\'说明\'">{{row.remark}}</td><td data-title="\'操作\'"><button class="btn btn-xs btn-primary"><span class="fa fa-pencil"></span></button> <button class="btn btn-xs btn-primary"><span class="fa fa-trash"></span></button></td></tr></table><div class="pull-right"><button class="btn btn-xs btn-primary">保存</button></div></div></div></div>'),e.put("app/malCaseUp/call/call.include.html",'<form class="form-inline w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="modal-body"><div class="container-fluid"><div class="row"><div class="form-group"><label for="name" class="control-label">事件等级：</label> <input type="hidden" ng-model="vm.formData.damageLevel"><select ng-change="vm.formData.damageLevel = (vm.metaData.levelList | filter:vm.formData.level.damageLevelName)[0].damageLevel" data="" class="form-controll input-sm" ng-options="level.damageLevelName for level in vm.metaData.levelList track by level.damageLevel" ng-model="vm.formData.level"></select></div><div class="form-group"><label for="name" class="control-label">上报科室：</label> <input type="hidden" ng-model="vm.formData.deptCode"><select ng-change="vm.formData.deptCode = (vm.metaData.deptList | filter:vm.formData.dept.deptName)[0].deptCode" data="" class="form-controll input-sm" ng-options="dept.deptName for dept in vm.metaData.deptList track by dept.deptCode" ng-model="vm.formData.dept"></select></div><div class="form-group"><label for="email" class="control-label">发生时间：</label> <span class="input-group"><input ng-model="vm.formData.eventDate" type="text" id="eventDate" name="eventDate" required="" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.eventTimeOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.eventTimeCalender()"><i class="fa fa-calendar"></i></button></span></span><uib-timepicker ng-model="vm.formData.eventTime" class="time-picker" ng-change="vm.timeChanged()" hour-step="1" minute-step="1" show-meridian="ismeridian"></uib-timepicker></div><div class="form-group"><label for="email" class="control-label">上报人：</label> <input type="hidden" ng-model="vm.formData.userCode"> <input readonly="" type="text" ng-model="vm.formData.userName" class="form-control input-sm"></div><div class="form-group"><div class="checkbox"><label><input ng-model="vm.formData.userRole" value="当事人" name="userRole" type="radio"> 当事人</label></div><div class="checkbox"><label><input ng-model="vm.formData.userRole" value="目击者" name="userRole" type="radio"> 目击者</label></div></div></div><div class="row"><div class="form-group"><label for="name" class="control-label">住院号：</label> <input class="form-control input-sm" required="" ng-model="vm.formData.patientHospNo" type="text"></div><div class="form-group"><label for="email" class="control-label">床号：</label> <input type="text" ng-model="vm.formData.patientBedNo" class="form-control input-sm"></div><div class="form-group"><label for="email" class="control-label">姓名：</label> <input type="text" ng-model="vm.formData.patientName" class="form-control input-sm"></div><div class="form-group"><label for="email" class="control-label">性别：</label><select name="gender" ng-model="vm.formData.patientGender" class="form-control input-sm"><option value="0">男</option><option value="1">女</option></select></div><div class="form-group"><label for="email" class="control-label">年龄：</label> <input type="text" ng-model="vm.formData.patientAge" class="form-control input-sm" style="width:4em;"> 岁</div><div class="form-group form-block"><label class="col-sm-1 control-label">诊断：</label><div class="col-sm-11"><input type="text" ng-model="vm.formData.patientDiagnose" class="form-control input-sm"></div></div></div><div class="row"><div class="form-group"><label class="control-label">事件类型：</label><div class="checkbox" ng-repeat="eventType in vm.metaData.eventTypeList"><label><input ng-model="vm.formData.eventType" ng-checked="vm.formData.eventType.eventTypeCode == eventType.eventTypeCode" type="radio" value="{{eventType}}" name="eventTypeCode"> {{eventType.eventTypeName}}</label></div></div></div><div class="row"><div class="form-group form-block"><label class="col-sm-2 control-label">事件经过描述（5WH1）：</label><div class="col-sm-10"><textarea type="text" ng-model="vm.formData.eventDescribe" class="form-control input-sm"></textarea></div></div></div></div></div><div class="modal-footer"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">上报</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form>'),
e.put("app/malCaseUp/call/call.modal.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写上报信息</h5></div><div ng-include="" src="\'app/malCaseUp/call/call.include.html\'"></div></div>'),e.put("app/malCaseUp/call/call.tpl.html",'<div class="col-md-12"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-list-alt"></i> <span>不良事件列表</span><div class="pull-right"><button ng-click="vm.open()" class="btn btn-primary btn-xs"><i class="fa fa-upload"></i> 事件上报</button></div></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-hover table-condensed table-bordered table-striped" demo-tracked-table="demo.tableTracker"><tr ng-repeat="row in $data"><td data-title="\'不良事件级别\'" ng-click="vm.loadDetail(row.code)">{{ row.damageLevelName }}</td><td data-title="\'类型\'" ng-click="vm.loadDetail(row.code)">{{row.eventTypeName}}</td><td data-title="\'发生时间\'" ng-click="vm.loadDetail(row.code)">{{row.eventTime}}</td><td data-title="\'科室\'" ng-click="vm.loadDetail(row.code)">{{row.deptName}}</td><td data-title="\'患者住院号\'" ng-click="vm.loadDetail(row.code)">{{ row.patientHospNo }}</td><td data-title="\'患者姓名\'" ng-click="vm.loadDetail(row.code)">{{row.patientName}}</td><td data-title="\'患者性别\'" ng-click="vm.loadDetail(row.code)">{{ row.patientGenderName}}</td><td data-title="\'患者年龄\'" ng-click="vm.loadDetail(row.code)">{{row.patientAge}}</td><td data-title="\'患者主要诊断\'" ng-click="vm.loadDetail(row.code)">{{row.patientDiagnose}}</td><td data-title="\'简要（5WH1）\'" ng-click="vm.loadDetail(row.code)">{{row.eventDescribe}}</td><td data-title="\'报告人\'" ng-click="vm.loadDetail(row.code)">{{row.userName}}</td><td data-title="\'操作\'"><button class="btn btn-default btn-xs" ng-click="vm.open(row)" uib-tooltip="编辑" ng-if="!row.isEditing"><span class="fa fa-pencil"></span></button></td></tr></table></div></div></div>'),e.put("app/malCaseUp/element/element.tpl.html",'<div ng-controller="MalCaseUpElementController as vm"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-indent"></i> <span>不良元素元素管理</span><div class="pull-right"><button class="btn btn-xs btn-primary">新增元素</button></div></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in vm.lst"><td data-title="\'元素编号\'">{{row.elementCode}}</td><td data-title="\'元素名称\'">{{row.elementName}}</td><td data-title="\'显示名称\'">{{row.viewName}}</td><td data-title="\'压疮大小\'">{{row.groupName}}</td><td data-title="\'元素类型\'">{{row.elementType}}</td><td data-title="\'组件宽度\'">{{row.width}}</td><td data-title="\'备注\'">{{row.remark}}</td><td data-title="\'是否必填\'">{{row.required}}</td></tr></table></div></div></div>'),e.put("app/malCaseUp/fix/fix.tpl.html",'<div class="col-md-12"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-user"></i> <span>角色信息</span><div class="pull-right"></div></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-hover table-condensed table-bordered table-striped" demo-tracked-table="demo.tableTracker"><tr ng-repeat="row in $data" ng-class="{\'info\': vm.selectedUserCode === row.code}"><td data-title="\'发生时间\'" ng-click="vm.loadDetail(row.code)">{{row.eventTime}}</td><td data-title="\'科室\'" ng-click="vm.loadDetail(row.code)">{{row.deptName}}</td><td data-title="\'住院号\'" ng-click="vm.loadDetail(row.code)">{{ row.patientHospNo }}</td><td data-title="\'姓名\'" ng-click="vm.loadDetail(row.code)">{{row.patientName}}</td><td data-title="\'性别\'" ng-click="vm.loadDetail(row.code)">{{ row.email }}</td><td data-title="\'年龄\'" ng-click="vm.loadDetail(row.code)">{{row.phone}}</td><td data-title="\'主要诊断\'" ng-click="vm.loadDetail(row.code)">{{row.hisCode}}</td><td data-title="\'风险评估\'" ng-click="vm.loadDetail(row.code)">{{row.name}}</td><td data-title="\'等级\'" ng-click="vm.loadDetail(row.code)">{{ row.email }}</td><td data-title="\'类型\'" ng-click="vm.loadDetail(row.code)">{{row.phone}}</td><td data-title="\'简要（5WH1）\'" ng-click="vm.loadDetail(row.code)">{{row.hisCode}}</td><td data-title="\'当事人\'" ng-click="vm.loadDetail(row.code)">{{row.name}}</td><td data-title="\'处理措施\'" ng-click="vm.loadDetail(row.code)">{{ row.email }}</td><td data-title="\'后果\'" ng-click="vm.loadDetail(row.code)">{{row.phone}}</td><td data-title="\'改进措施\'" ng-click="vm.loadDetail(row.code)">{{row.name}}</td><td data-title="\'追踪\'" ng-click="vm.loadDetail(row.code)">{{ row.email }}</td><td data-title="\'报告人\'" ng-click="vm.loadDetail(row.code)">{{row.phone}}</td></tr></table></div></div></div>'),e.put("app/malCaseUp/handle/estimate.tpl.html",'<form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="modal-body"><div class="container-fluid"><div class="row"><ul class="list-group"><li ng-click="vm.fillItem(\'measure\', measure)" ng-class="{\'active\': vm.formData.measure.meaCode == measure.meaCode}" class="list-group-item" ng-repeat="measure in vm.formData.measureList track by $index">{{$index + 1}}. {{measure.meaContent}}<div class="pull-right"><span style="margin-right:1em;">提出人：{{measure.userName}}</span></div><blockquote>{{!measure.resDescribe ? \'暂无评估\' : measure.resDescribe}}</blockquote></li><li class="list-group-item"><div class="form-group"><div class="col-sm-12"><textarea class="form-control input-sm" cols="50" rows="3" ng-disabled="!vm.formData.measure.seqId" ng-model="vm.formData.measure.resDescribe" placeholder="请选择措施">\n                </textarea></div></div><div class="form-group"><div class="col-sm-12"><button ng-click="vm.saveListItem(\'estimate\')" class="btn btn-primary btn-sm" ng-disabled="vm.formData.measure.resDescribe === \'\' || !vm.formData.measure.resDescribe">提交评估</button></div></div></li></ul></div></div></div></form>'),e.put("app/malCaseUp/handle/handle.modal.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写上报信息</h5></div><div class="modal-body"><div class="container-fluid"><div class="text-center handle-nav"><div class="text-center status-buttons"><a ui-sref-active="active" ui-sref=".malCase"><span>1</span> 不良事件信息</a> <i class="fa fa-arrow-right"></i> <a ui-sref-active="active" ui-sref=".report"><span>2</span> 调查处理</a> <i class="fa fa-arrow-right"></i> <a ui-sref-active="active" ui-sref=".requirement"><span>3</span> 整改要求</a> <i class="fa fa-arrow-right"></i> <a ui-sref-active="active" ui-sref=".measures"><span>4</span> 整改措施</a> <i class="fa fa-arrow-right"></i> <a ui-sref-active="active" ui-sref=".estimate"><span>5</span> 整改效果评估</a></div></div><div id="form-views" class="well well-sm" ui-view=""></div></div></div></div>'),e.put("app/malCaseUp/handle/handle.tpl.html",'<div class="col-md-12 handle-wrapper"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-list-alt"></i> <span>不良事件列表</span></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-hover table-condensed table-bordered table-striped" demo-tracked-table="demo.tableTracker"><tr ng-repeat="row in $data"><td data-title="\'不良事件级别\'" ng-click="vm.loadDetail(row.code)">{{ row.damageLevelName }}</td><td data-title="\'类型\'" ng-click="vm.loadDetail(row.code)">{{row.eventTypeName}}</td><td data-title="\'发生时间\'" ng-click="vm.loadDetail(row.code)">{{row.eventTime}}</td><td data-title="\'科室\'" ng-click="vm.loadDetail(row.code)">{{row.deptName}}</td><td data-title="\'患者住院号\'" ng-click="vm.loadDetail(row.code)">{{ row.patientHospNo }}</td><td data-title="\'患者姓名\'" ng-click="vm.loadDetail(row.code)">{{row.patientName}}</td><td data-title="\'患者性别\'" ng-click="vm.loadDetail(row.code)">{{ row.patientGenderName}}</td><td data-title="\'患者年龄\'" ng-click="vm.loadDetail(row.code)">{{row.patientAge}}</td><td data-title="\'患者主要诊断\'" ng-click="vm.loadDetail(row.code)">{{row.patientDiagnose}}</td><td data-title="\'简要（5WH1）\'" ng-click="vm.loadDetail(row.code)">{{row.eventDescribe}}</td><td data-title="\'报告人\'" ng-click="vm.loadDetail(row.code)">{{row.userName}}</td><td data-title="\'操作\'"><button class="btn btn-default btn-xs" ng-click="vm.open(row)" uib-tooltip="编辑" ng-if="!row.isEditing"><span class="fa fa-pencil"></span></button></td></tr></table></div></div></div>'),e.put("app/malCaseUp/handle/malCaseInfo.tpl.html",'<div class="modal-body"><div class="container-fluid"><div class="label-group col-md-6"><label class="col-md-4 control-label">事件类型：</label><div class="col-md-8">{{vm.metaData.malCaseInfo.eventTypeName}}</div></div><div class="label-group col-md-6"><label class="col-md-4 control-label">不良事件级别：</label><div class="col-md-8">{{vm.metaData.malCaseInfo.damageLevelName}}</div></div><div class="label-group col-md-6"><label for="name" class="col-md-4 control-label">上报科室：</label><div class="col-md-8">{{vm.metaData.malCaseInfo.deptName}}</div></div><div class="label-group col-md-6"><label class="control-label col-md-4">发生时间：</label><div class="col-md-8">{{vm.metaData.malCaseInfo.eventTime}}</div></div><div class="label-group col-md-6"><label for="email" class="col-md-4 control-label">上报人：</label><div class="col-md-8">{{vm.metaData.malCaseInfo.userName}}（{{vm.metaData.malCaseInfo.userRole}}）</div></div><div class="label-group col-md-6"><label for="name" class="col-md-4 control-label">患者住院号：</label><div class="col-md-8">{{vm.metaData.malCaseInfo.patientHospNo}}</div></div><div class="label-group col-md-6"><label for="email" class="col-md-4 control-label">患者床号：</label><div class="col-md-8">{{vm.metaData.malCaseInfo.patientBedNo}}</div></div><div class="label-group col-md-6"><label for="email" class="col-md-4 control-label">患者姓名：</label><div class="col-md-8">{{vm.metaData.malCaseInfo.patientName}}</div></div><div class="label-group col-md-6"><label for="email" class="col-md-4 control-label">患者性别：</label><div class="col-md-8">{{vm.metaData.malCaseInfo.patientGenderName}}</div></div><div class="label-group col-md-6"><label class="col-md-4 control-label">患者年龄：</label><div class="col-md-8">{{vm.metaData.malCaseInfo.patientAge}}</div></div><div class="label-group col-md-12"><label class="col-md-2 control-label">患者诊断：</label><div class="col-md-10">{{vm.metaData.malCaseInfo.patientDiagnose}}</div></div><div class="label-group col-md-12"><label class="col-md-2 control-label">事件经过描述：</label><div class="col-md-10">{{vm.metaData.malCaseInfo.eventDescribe}}</div></div></div></div>'),e.put("app/malCaseUp/handle/measures.tpl.html",'<form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="modal-body"><div class="container-fluid"><div class="row"><ul class="list-group"><li ng-class="{\'active\': vm.formData.measure.meaCode == measure.meaCode}" class="list-group-item" ng-click="vm.fillItem(\'measure\', measure)" ng-repeat="measure in vm.formData.measureList track by $index">{{$index + 1}}. {{measure.meaContent}}<div class="pull-right"><span style="margin-right:1em;">提出人：{{measure.userName}}</span> <span style="margin-right:1em;">实施负责人：{{(vm.metaData.userList | filter:measure.headUserCode)[0].userName }}</span> <button class="btn btn-xs btn-danger" uib-tooltip="删除" ng-click="vm.removeListItem({index: $index, listName: \'measure\', meaCode: measure.meaCode, reportCode: vm.formData.reportCode})"><span class="fa fa-trash"></span></button></div></li><li class="list-group-item"><div class="form-group"><label for="email" class="col-sm-2 control-label">措施实施负责人：</label><div class="col-sm-10"><input type="hidden" name="headUserCode" ng-model="vm.formData.headUserCode"><select class="form-controll input-sm" name="userName" ng-model="vm.formData.measure.headUserName" ng-change="vm.formData.measure.headUserCode = (vm.metaData.userList | filter:vm.formData.measure.headUserName)[0].userCode"><option ng-repeat="user in vm.metaData.userList" ng-selected="user.userCode == vm.formData.measure.headUserCode" value="{{user.userName}}">{{user.userName}}</option></select></div></div><div class="form-group"><label for="email" class="col-sm-2 control-label">整改措施：</label><div class="col-sm-10"><textarea class="form-control input-sm" cols="50" rows="3" ng-model="vm.formData.measure.meaContent" placeholder="填写整改要求">\n                </textarea></div></div><div class="form-group"><label for="email" class="col-sm-2 control-label"></label><div class="col-sm-10"><button ng-click="vm.resetForm(\'measure\')" class="btn btn-primary btn-sm">清空</button> <button ng-click="vm.saveListItem(\'measure\')" class="btn btn-success btn-sm" ng-disabled="vm.formData.measure.meaContent === \'\' || !vm.formData.measure.meaContent">保存</button></div></div></li></ul></div></div></div></form>'),e.put("app/malCaseUp/handle/report.tpl.html",'<form class="form-inline w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="modal-body"><div class="container-fluid"><div class="row"><p>患者信息</p><table class="table table-condensed table-bordered table-striped"><tr><th style="width: 5em;"></th><th class="text-center">不良事件发生前</th><th class="text-center">不良事件发生后</th></tr><tr><td>生命体征</td><td><div class="form-group"><label for="email" class="control-label">BP</label> <input type="text" style="width: 5em;" ng-model="vm.formData.reportDetailList.bp_before.value" class="form-control input-sm"> mmHg</div><div class="form-group"><label for="email" class="control-label">P</label> <input type="text" style="width: 5em;" ng-model="vm.formData.reportDetailList.p_before.value" class="form-control input-sm"> 次／分</div><br><div class="form-group"><label for="email" class="control-label">R</label> <input type="text" style="width: 5em;" ng-model="vm.formData.reportDetailList.r_before.value" class="form-control input-sm"> 次／分</div><div class="form-group"><label for="email" class="control-label">T</label> <input type="text" style="width: 5em;" ng-model="vm.formData.reportDetailList.t_before.value" class="form-control input-sm"> ℃</div></td><td><div class="form-group"><label for="email" class="control-label">BP</label> <input type="text" style="width: 5em;" ng-model="vm.formData.reportDetailList.bp_after.value" class="form-control input-sm"> mmHg</div><div class="form-group"><label for="email" class="control-label">P</label> <input type="text" style="width: 5em;" ng-model="vm.formData.reportDetailList.p_after.value" class="form-control input-sm"> 次／分</div><br><div class="form-group"><label for="email" class="control-label">R</label> <input type="text" style="width: 5em;" ng-model="vm.formData.reportDetailList.r_after.value" class="form-control input-sm"> 次／分</div><div class="form-group"><label for="email" class="control-label">T</label> <input type="text" style="width: 5em;" ng-model="vm.formData.reportDetailList.t_after.value" class="form-control input-sm"> ℃</div></td></tr><tr><td>精神状况</td><td><div class="form-group"><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_clear_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_clear_before.value" type="checkbox"> 神志清</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_directive_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_directive_before.value" type="checkbox"> 有定向力</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_upset_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" tng-model="vm.formData.reportDetailList.psychosis_upset_before.value" type="checkbox"> 不安</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_undiscerned_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_undiscerned_before.value" type="checkbox"> 无定力</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_halfComa_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_halfComa_before.value" type="checkbox"> 半昏迷</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_coma_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_coma_before.value" type="checkbox"> 昏迷</label></div><div class="checkbox"><input type="text" ng-model="vm.formData.reportDetailList.psychosis_else_before.value" class="input-sm form-control"></div></div></td><td><div class="form-group"><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_clear_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_clear_after.value" type="checkbox"> 神志清</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_directive_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_directive_after.value" type="checkbox"> 有定向力</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_upset_after.value = \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" tng-model="vm.formData.reportDetailList.psychosis_upset_after.value" type="checkbox"> 不安</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_undiscerned_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_undiscerned_after.value" type="checkbox"> 无定力</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_halfComa_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_halfComa_after.value" type="checkbox"> 半昏迷</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.psychosis_coma_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.psychosis_coma_after.value" type="checkbox"> 昏迷</label></div><div class="checkbox"><input type="text" ng-model="vm.formData.reportDetailList.psychosis_else_after.value" class="input-sm form-control"></div></div></td></tr><tr><td>运动</td><td><div class="form-group"><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.motion_self_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.motion_self_before.value"> 独立</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.motion_assist_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.motion_assist_before.value"> 辅助支持</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.motion_limit_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.motion_limit_before.value"> 限制在床/轮椅</label></div></div></td><td><div class="form-group"><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.motion_self_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.motion_self_after.value" type="checkbox"> 独立</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.motion_assist_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.motion_assist_after.value" type="checkbox"> 辅助支持</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.motion_limit_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.motion_limit_after.value" type="checkbox"> 限制在床/轮椅</label></div></div></td></tr><tr><td>残疾</td><td><div class="form-group"><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.deformity_none_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.deformity_none_before.value"> 无</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.deformity_auditionDown_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.deformity_auditionDown_before.value"> 听力下降</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.deformity_costive_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.deformity_costive_before.value"> 行动不便</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.deformity_unclearEyed_before.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.deformity_unclearEyed_before.value"> 视力缺损</label></div><div class="checkbox"><input type="text" ng-model="vm.formData.reportDetailList.deformity_else_before.value" class="input-sm form-control"></div></div></td><td><div class="form-group"><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.deformity_none_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.deformity_none_after.value" type="checkbox"> 无</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.deformity_auditionDown_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.deformity_auditionDown_after.value" type="checkbox"> 听力下降</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.deformity_costive_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.deformity_costive_after.value" type="checkbox"> 行动不便</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.deformity_unclearEyed_after.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="vm.formData.reportDetailList.deformity_unclearEyed_after.value" type="checkbox"> 视力缺损</label></div><div class="checkbox"><input type="text" ng-model="vm.formData.reportDetailList.deformity_else_after.value" class="input-sm form-control"></div></div></td></tr><tr><td>其他说明</td><td><textarea name="name" ng-model="vm.formData.reportDetailList.elsedeclare_before.value" rows="2" cols="50" class="form-control input-sm"></textarea></td><td><textarea name="name" ng-model="vm.formData.reportDetailList.elsedeclare_after.value" rows="2" cols="50" class="form-control input-sm"></textarea></td></tr></table></div><div class="row"><div class="form-group"><label for="name" class="control-label">不良事件发生24小时内用药：</label><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_24_medicine_none.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_24_medicine_none.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 无</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_24_medicine_diuretic.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_24_medicine_diuretic.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 利尿剂</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_24_medicine_nicotine.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_24_medicine_nicotine.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 尼古丁／镇静</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_24_medicine_high_handed.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_24_medicine_high_handed.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 抗高压</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_24_medicine_depressed.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_24_medicine_depressed.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 抗抑郁</label></div><div class="checkbox"><input type="text" ng-model="vm.formData.reportDetailList.malcase_24_medicine_else.value" class="input-sm form-control"></div></div></div><div class="row"><div class="form-group"><label for="name" class="control-label">不良事件发生前采取的特殊预防措施：</label><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_none.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_none.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 无</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_accompany.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_accompany.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 陪伴</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_informed.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_informed.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 已告知</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_guardrail.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_guardrail.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 床边扶栏</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_motionDevice.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_motionDevice.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 动作设备</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_sign.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_sign.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 标识</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_closestool.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_closestool.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 床边便器</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_restlessLimit.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_restlessLimit.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 躁动约束</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_before_measures_riskWarning.value == \'1\'" ng-model="vm.formData.reportDetailList.malcase_before_measures_riskWarning.value" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 风险预警</label></div><div class="checkbox"><input type="text" ng-model="vm.formData.reportDetailList.malcase_before_measures_else.value" class="input-sm form-control"></div></div></div><div class="row"><div class="form-group"><label for="name" class="control-label">不良事件发生地点：</label><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_happen_addr_ward.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_happen_addr_ward.value"> 病房</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_happen_addr_treatmentRoom.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_happen_addr_treatmentRoom.value"> 治疗室</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_happen_addr_changeRoom.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_happen_addr_changeRoom.value"> 换药室</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_happen_addr_handleRoom.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_happen_addr_handleRoom.value"> 处置室</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_happen_addr_corridor.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_happen_addr_corridor.value"> 走廊</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_happen_addr_washroom.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_happen_addr_washroom.value"> 厕所</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_happen_addr_outDepartment.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_happen_addr_outDepartment.value"> 病区外</label></div><div class="checkbox"><input type="text" ng-model="vm.formData.reportDetailList.malcase_happen_addr_else.value" class="input-sm form-control"></div></div></div><div class="row"><div class="form-group"><label for="name" class="control-label">不良事件发生原因：</label><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_physiological.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_physiological.value"> 病患生理因素</label></div>（<div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_old.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_old.value"> 年老体弱</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_longSick.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_longSick.value"> 久病不愈</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_worsen.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_worsen.value"> 病情恶化</label></div>）<div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_mentality.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_mentality.value"> 病患心理因素</label></div>（<div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_badMind.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_badMind.value"> 情绪不稳</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_lostMind.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_lostMind.value"> 精神失常</label></div>）<div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_artificia.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_artificia.value"> 人为因素</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_stuffStoppage.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_stuffStoppage.value"> 医疗材料故障</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_instrumentStoppage.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_instrumentStoppage.value"> 仪器故障</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_deviceStoppage.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_deviceStoppage.value"> 设备故障</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_yard.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_yard.value"> 场地</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_environment.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_environment.value"> 环境因素</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_winebowl.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_winebowl.value"> 酒瘾</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_drugster.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_drugster.value"> 毒瘾</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_aboutSystem.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_aboutSystem.value"> 与制度有关</label></div><div class="checkbox"><label><input ng-checked="vm.formData.reportDetailList.malcase_reason_aboutFlow.value == \'1\'" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox" ng-model="vm.formData.reportDetailList.malcase_reason_aboutFlow.value"> 与流程有关</label></div><div class="checkbox"><label><input ng-checked="" ng-true-value="\'1\'" ng-false-value="\'0\'" type="checkbox"> 其他：</label> <input type="text" class="input-sm form-control" ng-model="vm.formData.reportDetailList.malcase_reason_else.value"></div></div></div><div class="row"><div class="form-group"><label for="name" class="control-label">不良事件目击：</label><div class="checkbox"><input type="text" ng-model="vm.formData.reportDetailList.malcase_witness.value" class="input-sm form-control"></div></div></div><div class="row"><div class="form-group"><label for="name" class="control-label">不良事件发生的事实（包括不良事件发生经过，发生后治疗，发生后护理及发生后检查结果等情况，由当事人或发现者填写）：</label> <textarea name="name" ng-model="vm.formData.reportDetailList.malcase_truth.value" rows="3" cols="100" class="form-control input-sm"></textarea></div></div></div></div><div class="modal-footer"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.saveReportDetail()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form>'),
e.put("app/malCaseUp/handle/requirement.tpl.html",'<form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="modal-body"><div class="container-fluid"><div class="row"><ul class="list-group"><li class="list-group-item" ng-class="{\'active\': vm.formData.requirement.reqCode == requirement.reqCode}" ng-click="vm.fillItem(\'requirement\', requirement)" ng-repeat="requirement in vm.formData.requirementList track by $index">{{$index + 1}}. {{requirement.reqContent}}<div class="pull-right"><span style="margin-right:1em;">提出人：{{requirement.userName}}</span> <button class="btn btn-xs btn-danger" uib-tooltip="删除" ng-click="vm.removeListItem({index: $index, listName: \'requirement\', seqId: requirement.seqId})"><span class="fa fa-trash"></span></button></div></li><li class="list-group-item"><div class="form-group"><div class="col-sm-12"><textarea class="form-control input-sm" cols="50" rows="3" ng-model="vm.formData.requirement.reqContent" placeholder="填写整改要求">\n                </textarea></div></div><div class="form-group"><div class="col-sm-12"><button ng-click="vm.resetForm(\'requirement\')" class="btn btn-primary btn-sm">清空</button> <button ng-click="vm.saveListItem(\'requirement\')" class="btn btn-success btn-sm" ng-disabled="vm.formData.requirement.reqContent === \'\' || !vm.formData.requirement.reqContent">保存</button></div></div></li></ul></div></div></div></form>'),e.put("app/malCaseUp/level/addLevel.tpl.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写分级标准信息</h5></div><form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="modal-body"><div class="container-fluid"><div class="col-md-8"><div class="form-group"><label for="name" class="col-sm-3 control-label">等级</label><div class="col-sm-9"><input class="form-control input-sm" required="" ng-model="vm.formData.damageLevelName" name="damageLevelName" type="text"></div></div><div class="form-group"><label for="email" class="col-sm-3 control-label">描述：</label><div class="col-sm-9"><textarea class="form-control input-sm" name="remark" ng-model="vm.formData.remark"></textarea></div></div><div class="form-group"><label for="email" class="col-sm-3 control-label">流程：</label><div class="col-sm-9"><div class="flow-list"><div ng-repeat="flowItem in vm.formData.flowList track by $index"><i class="fa fa-level-down fa-flip-horizontal" ng-if="!$last"></i> <span>{{flowItem}}</span> <a ng-click="vm.removeFlow($index)" href="javascript:;" class="text-danger"><i class="fa fa-times-circle"></i></a></div></div><div class="input-group"><input type="text" class="form-control input-sm" ng-model="vm.flowText" placeholder="填写流程"> <span class="input-group-btn"><button ng-click="vm.addFlow($event)" class="btn btn-primary btn-sm" ng-disabled="vm.flowText === \'\' || !vm.flowText">添加流程</button></span></div></div></div></div></div></div><div class="modal-footer"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></form></div>'),e.put("app/malCaseUp/level/level.tpl.html",'<div class="col-md-7"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>填写不良事件上报表</span></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-hover table-condensed table-bordered table-striped" demo-tracked-table="demo.tableTracker"><tr ng-repeat="row in $data" ng-class="{\'info\': vm.selectedLevel.seqId === row.seqId}"><td data-title="\'等级\'" ng-click="vm.edit(row)">{{row.damageLevelName}}</td><td data-title="\'等级描述\'" ng-click="vm.edit(row)">{{row.remark}}</td><td data-title="\'处理流程\'" ng-click="vm.edit(row)">{{ row.flow }}</td><td data-title="\'操作\'"><button class="btn btn-danger btn-xs" ng-click="vm.del(row.seqId)" uib-tooltip="删除" ng-if="!row.isEditing"><span class="fa fa-trash"></span></button></td></tr></table></div></div></div><div class="col-md-5"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-tasks"></i> <span>填写分级标准信息</span><div class="pull-right"><button ng-click="vm.add()" class="btn btn-primary btn-xs"><i class="fa fa-plus"></i> 添加分级标准 <i class="fa fa-angle-right"></i></button></div></div><div class="panel-body"><form class="form-horizontal w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="addLevelForm"><div class="container-fluid"><div class="col-md-12"><div class="form-group"><label for="name" class="col-sm-3 control-label">等级</label><div class="col-sm-9"><input class="form-control input-sm" required="" ng-model="vm.formData.damageLevelName" name="damageLevelName" type="text"></div></div><div class="form-group"><label for="email" class="col-sm-3 control-label">描述：</label><div class="col-sm-9"><textarea class="form-control input-sm" name="remark" ng-model="vm.formData.remark"></textarea></div></div><div class="form-group"><label for="email" class="col-sm-3 control-label">流程：</label><div class="col-sm-9"><div class="flow-list"><div ng-repeat="flowItem in vm.formData.flowList track by $index"><i class="fa fa-level-down fa-flip-horizontal" ng-if="!$last"></i> <span>{{flowItem}}</span> <a ng-click="vm.removeFlow($index)" href="javascript:;" class="text-danger"><i class="fa fa-times-circle"></i></a></div></div><div class="input-group"><input type="text" class="form-control input-sm" ng-model="vm.flowText" placeholder="填写流程"> <span class="input-group-btn"><button ng-click="vm.addFlow()" class="btn btn-primary btn-sm" ng-disabled="vm.flowText === \'\' || !vm.flowText">添加流程</button></span></div></div></div><div class="form-group"><label class="col-sm-3 control-label"></label><div class="col-sm-9"><button class="btn btn-sm btn-success" type="button" w5c-form-submit="vm.save()">保存</button></div></div></div></div></form></div></div></div>'),e.put("app/malCaseUp/statistics/statistics.tpl.html",'<div ng-controller="MalCaseUpStatisticsController as vm"><button ng-click="tableParams.sorting({})" class="btn btn-default pull-left">新增</button> <button ng-click="tableParams.sorting({})" class="btn btn-danger pull-left">修改</button><table ng-table="tableParams" class="table table-striped table-bordered"><thead><tr><td>事件名称</td><td>事件类型</td><td>伤害级别</td><td>事件描述</td></tr></thead><tbody style="background-color: white"><tr ng-repeat="ls in vm.lst"><td>{{ls.groupNo}}</td><td>{{ls.groupName}}</td><td>{{ls.bedNo}}</td><td>{{ls.remark}}</td></tr></tbody></table></div>'),e.put("app/malCaseUp/type/type.tpl.html",'<div class="col-md-12" ng-controller="MalCaseUpTypeController as vm"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-send"></i> <span>上报类型列表</span><div class="pull-right"><button class="btn btn-xs btn-primary">增加类型</button></div></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-condensed table-bordered table-striped"><tr ng-repeat="row in $data"><td data-title="\'上报类型编号\'"><em>{{row.eventCode}}</em></td><td data-title="\'上报类型名称\'">{{row.eventName}}</td><td data-title="\'最后更新人\'">{{ row.lastUpdateCode }}</td><td data-title="\'最后更新时间\'">{{row.lastUpdateTime}}</td></tr></table><loading></loading></div></div></div>'),e.put("app/nursingWorkers/files/files.tpl.html",'<div class="col-md-2"><div class="panel pull-left dept-wrapper panel-default"><div class="panel-heading"><i class="fa fa-bars"></i> <span>科室列表</span></div><div class="panel-body list"><div class="list-filter"><input type="text" class="form-control input-sm" ng-model="vm.filterText.deptName" placeholder="输入关键字搜索"></div><div class="list__tile"><a href="javascript:;" ng-class="{\'active\': vm.deptData.deptCode === vm.selectedDept}" ng-click="vm.load(vm.deptData.deptCode)"><span class="list__text ng-binding ng-scope" role="button" tabindex="0">{{vm.deptData.deptName}}</span> <i class="pull-right fa fa-angle-down"></i></a></div><ul class="sublist"><li ng-repeat="subItem in vm.deptData.belongedDepts | filter: vm.filterText" class="accordion-item" ng-class="{\'active\': subItem.deptCode === vm.selectedDept}"><a ng-click="vm.load(subItem.deptCode)" class="sublist__item">{{subItem.deptName}}</a></li></ul></div></div></div><div class="col-md-10"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-user"></i> <span>人员数据</span><div class="pull-right"><button ng-click="vm.open()" ng-disabled="!vm.selectedDept" class="btn btn-primary btn-xs"><i class="fa fa-user-plus"></i> 添加员工</button></div></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-hover table-condensed table-bordered table-striped" demo-tracked-table="demo.tableTracker"><tr ng-repeat="row in $data" ng-class="{\'info\': vm.selectedUserCode === row.userCode}"><td data-title="\'编号\'" ng-click="vm.loadDetail(row.userCode)">{{row.hisCode}}</td><td data-title="\'姓名\'" ng-click="vm.loadDetail(row.userCode)">{{row.userName}}</td><td data-title="\'邮箱\'" ng-click="vm.loadDetail(row.userCode)">{{ row.email }}</td><td data-title="\'电话\'" ng-click="vm.loadDetail(row.userCode)">{{row.phone}}</td><td data-title="\'操作\'"><button class="btn btn-default btn-xs" ng-click="vm.open(row.userCode)" uib-tooltip="编辑员工信息" ng-if="!row.isEditing"><span class="fa fa-pencil"></span></button> <button class="btn btn-danger btn-xs" ng-click="vm.del(row)" uib-tooltip="删除员工" ng-if="!row.isEditing"><span class="fa fa-trash"></span></button></td></tr></table></div></div><div class="panel panel-default" ng-if="vm.selectedUserCode"><div class="panel-body"><uib-tabset active="active"><uib-tab index="0" heading="基本信息"><div class="form-group col-md-3"><label class="col-sm-6 control-label">员工编号：</label> <span class="col-sm-6">{{vm.detail.comUser.hisCode}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">员工姓名：</label> <span class="col-sm-6">{{vm.detail.comUser.userName}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">员工性别：</label> <span class="col-sm-6">{{vm.detail.comUser.genderName}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">出生日期：</label> <span class="col-sm-6">{{vm.detail.comUser.birthday | date: \'yyyy-MM-dd\'}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">电话：</label> <span class="col-sm-6">{{vm.detail.comUser.phone}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">邮箱：</label> <span class="col-sm-6">{{vm.detail.comUser.email}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">到院日期：</label> <span class="col-sm-6">{{vm.detail.comUser.inductionDate | date: \'yyyy-MM-dd\'}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">员工性质：</label> <span class="col-sm-6">{{vm.detail.comUser.natureName}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">国籍：</label> <span class="col-sm-6">{{vm.detail.comUser.country}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">籍贯：</label> <span class="col-sm-6">{{vm.detail.comUser.nativePlace}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">民族：</label> <span class="col-sm-6">{{vm.detail.comUser.nation}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">证件类型：</label> <span class="col-sm-6">{{vm.detail.comUser.papersTypeName}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">证件号码：</label> <span class="col-sm-6">{{vm.detail.comUser.papersNo}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">毕业学校：</label> <span class="col-sm-6">{{vm.detail.comUser.graduationSchool}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">所学专业：</label> <span class="col-sm-6">{{vm.detail.comUser.profession}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">学位：</label> <span class="col-sm-6">{{vm.detail.comUser.degree}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">学位证编号：</label> <span class="col-sm-6">{{vm.detail.comUser.degreeNo}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">学历：</label> <span class="col-sm-6">{{vm.detail.comUser.education}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">学历证编号：</label> <span class="col-sm-6">{{vm.detail.comUser.educationNo}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">毕业时间：</label> <span class="col-sm-6">{{vm.detail.comUser.graduationDate | date:\'yyyy-MM-dd\'}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">外语水平：</label> <span class="col-sm-6">{{vm.detail.comUser.language}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">健康状态：</label> <span class="col-sm-6">{{vm.detail.comUser.health}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">批准时间：</label> <span class="col-sm-6">{{vm.detail.comUser.practiceApproveDate | date:\'yyyy-MM-dd\'}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">执业类型：</label> <span class="col-sm-6">{{vm.detail.comUser.practiceTypeName}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">执业证号：</label> <span class="col-sm-6">{{vm.detail.comUser.practiceType}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">有效期致：</label> <span class="col-sm-6">{{vm.detail.comUser.practiceValidDate | date: \'yyyy-MM-dd\'}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">政治面貌：</label> <span class="col-sm-6">{{vm.detail.comUser.politacalStatusName}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">职称：</label> <span class="col-sm-6">{{vm.detail.comUser.technicalPost}}</span></div><div class="form-group col-md-3"><label class="col-sm-6 control-label">职务：</label> <span class="col-sm-6">{{vm.detail.comUser.duty}}</span></div></uib-tab><uib-tab index="1" heading="职称职务" active="tab.active"><table class="table table-striped table-condensed table-no-border"><tr><th>职务名称</th><th>审批单位</th><th>起始日期</th><th>结束日期</th></tr><tr ng-repeat="dtl in vm.detail.comUserPosition"><td class="text-left">{{dtl.positionName}}</td><td class="text-left">{{dtl.reviewUnit}}</td><td class="text-left">{{dtl.startDate | date:\'yyyy-MM-dd\'}}</td><td class="text-left">{{dtl.endDate | date:\'yyyy-MM-dd\'}}</td></tr></table></uib-tab><uib-tab index="2" heading="护理信息"><table class="table table-striped table-condensed table-no-border"><tr><th>工作单位</th><th>工作部门</th><th>职务</th><th>起始日期</th><th>结束日期</th></tr><tr ng-repeat="dtl in vm.detail.comUserNursing"><td class="text-left">{{dtl.reviewUnit}}</td><td class="text-left">{{dtl.deptName}}</td><td class="text-left">{{dtl.position}}</td><td class="text-left">{{dtl.startDate | date:\'yyyy-MM-dd\'}}</td><td class="text-left">{{dtl.endDate | date:\'yyyy-MM-dd\'}}</td></tr></table></uib-tab><uib-tab index="3" heading="教育工作"><table class="table table-striped table-condensed table-no-border"><tr><th>代课类型</th><th>学时数</th><th>课程专题</th><th>课程内容</th><th>起始日期</th><th>结束日期</th></tr><tr ng-repeat="dtl in vm.detail.comUserEducation"><td class="text-left">{{dtl.educationType}}</td><td class="text-left">{{dtl.leaningTime}}</td><td class="text-left">{{dtl.courseTopics}}</td><td class="text-left">{{dtl.courseContent}}</td><td class="text-left">{{dtl.startDate | date:\'yyyy-MM-dd\'}}</td><td class="text-left">{{dtl.endDate | date:\'yyyy-MM-dd\'}}</td></tr></table></uib-tab><uib-tab index="4" heading="继续教育"><table class="table table-striped table-condensed table-no-border"><tr><th>主办单位</th><th>学习内容</th><th>学时</th><th>主讲</th><th>学分类型</th><th>学分</th><th>经费</th><th>起始日期</th><th>结束日期</th></tr><tr ng-repeat="dtl in vm.detail.comUserTraining"><td class="text-left">{{dtl.professional}}</td><td class="text-left">{{dtl.learnContent}}</td><td class="text-left">{{dtl.diploma}}</td><td class="text-left">{{dtl.speaker}}</td><td class="text-left">{{dtl.creditType}}</td><td class="text-left">{{dtl.credit}}</td><td class="text-left">{{dtl.funding}}</td><td class="text-left">{{dtl.startDate | date:\'yyyy-MM-dd\'}}</td><td class="text-left">{{dtl.endDate | date:\'yyyy-MM-dd\'}}</td></tr></table></uib-tab><uib-tab index="5" heading="学历信息"><table class="table table-striped table-condensed table-no-border"><tr><th>学校</th><th>专业</th><th>学历</th><th>学历证书编号</th><th>学位</th><th>学位证书编号</th><th>起始日期</th><th>结束日期</th></tr><tr ng-repeat="dtl in vm.detail.comUserLearning"><td class="text-left">{{dtl.school}}</td><td class="text-left">{{dtl.professional}}</td><td class="text-left">{{dtl.diploma}}</td><td class="text-left">{{dtl.diplomaNo}}</td><td class="text-left">{{dtl.degree}}</td><td class="text-left">{{dtl.degreeNo}}</td><td class="text-left">{{dtl.startDate | date:\'yyyy-MM-dd\'}}</td><td class="text-left">{{dtl.endDate | date:\'yyyy-MM-dd\'}}</td></tr></table></uib-tab><uib-tab index="6" heading="家庭成员"><table class="table table-striped table-condensed table-no-border"><tr><th>亲属关系</th><th>姓名</th><th>联系电话</th><th>邮件</th></tr><tr ng-repeat="dtl in vm.detail.comUserFamily"><td class="text-left">{{dtl.relation}}</td><td class="text-left">{{dtl.name}}</td><td class="text-left">{{dtl.phone}}</td><td class="text-left">{{dtl.email}}</td></tr></table></uib-tab></uib-tabset></div></div></div>'),e.put("app/nursingWorkers/files/modal.tpl.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写用户信息</h5></div><div class="modal-body"><uib-tabset active="active"><uib-tab index="0" heading="基本信息"><form class="form-horizontal comUser-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="userForm"><div class="static-form-item container-fluid"><div class="col-md-6"><div class="form-group"><label for="hisCode" class="col-sm-3 control-label">员工编号：</label><div class="col-sm-9"><input class="form-control input-sm" required="" ng-model="vm.count.comUser.hisCode" id="hisCode" name="hisCode" type="text"></div></div><div class="form-group"><label for="userName" class="col-sm-3 control-label">姓名：</label><div class="col-sm-9"><input class="form-control input-sm" required="" ng-model="vm.count.comUser.userName" id="userName" name="userName" type="text"></div></div><div class="form-group"><label for="duty" class="col-sm-3 control-label">职务：</label><div class="col-sm-9"><input id="duty" name="duty" ng-model="vm.count.comUser.duty" class="form-control input-sm" type="text"></div></div><div class="form-group"><label for="birthday" class="col-sm-3 control-label">出生日期：</label><div class="col-sm-9"><span class="input-group"><input type="text" id="birthday" name="birthday" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.birthdayOpen" ng-model="vm.count.comUser.birthday" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'birthdayOpen\')"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="form-group"><label for="papersType" class="col-sm-3 control-label">证件类型：</label><div class="col-sm-9"><select id="papersType" name="papersType" ng-model="vm.count.comUser.papersType" class="form-control input-sm"><option value="01" label="身份证"></option><option value="02" label="居住证"></option><option value="03" label="签证"></option><option value="04" label="护照"></option><option value="05" label="军人证"></option></select></div></div><div class="form-group"><label for="nature" class="col-sm-3 control-label">员工性质：</label><div class="col-sm-9"><select id="nature" name="nature" ng-model="vm.count.comUser.nature" class="form-control input-sm"><option value="01" label="实习"></option><option value="02" label="试用"></option><option value="03" label="正式"></option><option value="04" label="离职"></option><option value="05" label="其他"></option></select></div></div><div class="form-group"><label for="country" class="col-sm-3 control-label">国籍：</label><div class="col-sm-9"><input type="text" id="country" name="country" ng-model="vm.count.comUser.country" class="form-control input-sm"></div></div><div class="form-group"><label for="nativePlace" class="col-sm-3 control-label">籍贯：</label><div class="col-sm-9"><input type="text" id="nativePlace" name="nativePlace" ng-model="vm.count.comUser.nativePlace" class="form-control input-sm"></div></div><div class="form-group"><label for="graduationSchool" class="col-sm-3 control-label">毕业学校：</label><div class="col-sm-9"><input type="text" id="graduationSchool" name="nativePlace" ng-model="vm.count.comUser.graduationSchool" class="form-control input-sm"></div></div><div class="form-group"><label for="degree" class="col-sm-3 control-label">学分类型：</label><div class="col-sm-9"><input type="text" id="degree" name="degree" ng-model="vm.count.comUser.degree" class="form-control input-sm"></div></div><div class="form-group"><label for="education" class="col-sm-3 control-label">学历：</label><div class="col-sm-9"><input type="text" id="education" name="education" ng-model="vm.count.comUser.education" class="form-control input-sm"></div></div><div class="form-group"><label for="language" class="col-sm-3 control-label">外语水平：</label><div class="col-sm-9"><input type="text" id="language" name="language" ng-model="vm.count.comUser.language" class="form-control input-sm"></div></div><div class="form-group"><label for="health" class="col-sm-3 control-label">健康状态：</label><div class="col-sm-9"><input type="text" id="health" name="health" ng-model="vm.count.comUser.health" class="form-control input-sm"></div></div><div class="form-group"><label for="practiceApproveDate" class="col-sm-3 control-label">执业批准时间：</label><div class="col-sm-9"><span class="input-group"><input type="text" id="practiceApproveDate" name="practiceApproveDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.practiceApproveDateIsOpen" ng-model="vm.count.comUser.practiceApproveDate" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'practiceApproveDateIsOpen\')"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="form-group"><label for="politacalStatus" class="col-sm-3 control-label">政治面貌：</label><div class="col-sm-9"><select id="politacalStatus" name="politacalStatus" ng-model="vm.count.comUser.politacalStatus" class="form-control input-sm"><option value="01" label="党员"></option><option value="02" label="团员"></option><option value="03" label="公民"></option><option value="04" label="其他"></option></select></div></div></div><div class="col-md-6"><div class="form-group"><label for="male" class="col-sm-3 control-label">性别：</label><div class="col-sm-9"><label class="radio-inline"><input type="radio" name="gender" ng-model="vm.count.comUser.gender" checked="" id="male" value="1"> 男</label> <label class="radio-inline"><input type="radio" name="gender" ng-model="vm.count.comUser.gender" id="female" value="0"> 女</label></div></div><div class="form-group"><label for="email" class="col-sm-3 control-label">邮箱：</label><div class="col-sm-9"><input id="email" class="form-control input-sm" name="email" ng-model="vm.count.comUser.email" type="email"></div></div><div class="form-group"><label for="phone" class="col-sm-3 control-label">电话：</label><div class="col-sm-9"><input id="phone" class="form-control input-sm" name="phone" ng-model="vm.count.comUser.phone" type="tel"></div></div><div class="form-group"><label for="inductionDate" class="col-sm-3 control-label">到院日期：</label><div class="col-sm-9"><span class="input-group"><input type="text" id="inductionDate" name="inductionDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.inductionDateOpen" ng-model="vm.count.comUser.inductionDate" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'inductionDateOpen\')"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="form-group"><label for="papersNo" class="col-sm-3 control-label">证件号码：</label><div class="col-sm-9"><input type="text" id="papersNo" name="papersNo" ng-model="vm.count.comUser.papersNo" class="form-control input-sm"></div></div><div class="form-group"><label for="nation" class="col-sm-3 control-label">民族：</label><div class="col-sm-9"><input type="text" id="nation" name="nation" ng-model="vm.count.comUser.nation" class="form-control input-sm"></div></div><div class="form-group"><label for="profession" class="col-sm-3 control-label">所学专业：</label><div class="col-sm-9"><input type="text" id="profession" name="profession" ng-model="vm.count.comUser.profession" class="form-control input-sm"></div></div><div class="form-group"><label for="educationNo" class="col-sm-3 control-label">学历证书编号：</label><div class="col-sm-9"><input type="text" id="educationNo" name="educationNo" ng-model="vm.count.comUser.educationNo" class="form-control input-sm"></div></div><div class="form-group"><label for="graduationDate" class="col-sm-3 control-label">毕业时间：</label><div class="col-sm-9"><span class="input-group"><input type="text" id="graduationDate" name="graduationDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.graduationDateOpen" ng-model="vm.count.comUser.graduationDate" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'graduationDateOpen\')"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="form-group"><label for="degreeNo" class="col-sm-3 control-label">学分：</label><div class="col-sm-9"><input type="text" id="degreeNo" name="degreeNo" ng-model="vm.count.comUser.degreeNo" class="form-control input-sm"></div></div><div class="form-group"><label for="practiceType" class="col-sm-3 control-label">执业类型：</label><div class="col-sm-9"><select id="practiceType" name="practiceType" ng-model="vm.count.comUser.practiceType" class="form-control input-sm"><option value="01" label="医师"></option><option value="02" label="护士"></option></select></div></div><div class="form-group"><label for="practiceNo" class="col-sm-3 control-label">执业证号：</label><div class="col-sm-9"><input type="text" id="practiceNo" name="practiceNo" ng-model="vm.count.comUser.practiceNo" class="form-control input-sm"></div></div><div class="form-group"><label for="practiceValidDate" class="col-sm-3 control-label">执业有效期致：</label><div class="col-sm-9"><span class="input-group"><input type="text" id="practiceValidDate" name="practiceValidDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="vm.practiceValidDateIsOpen" ng-model="vm.count.comUser.practiceValidDate" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'practiceValidDateIsOpen\')"><i class="fa fa-calendar"></i></button></span></span></div></div><div class="form-group"><label for="technicalPost" class="col-sm-3 control-label">职称：</label><div class="col-sm-9"><input type="text" id="technicalPost" name="technicalPost" ng-model="vm.count.comUser.technicalPost" class="form-control input-sm"></div></div></div></div><div class="container-fluid"><div class="col-md-6"><div class="form-group"><label class="col-sm-3 control-label"></label> <button data-type="comUser" w5c-form-submit="vm.save(\'comUser\', $event)" class="btn btn-success btn-sm">保存</button></div></div></div></form></uib-tab><uib-tab index="1" heading="职称职务" disable="!vm.accessible" active="tab.active"><form class="form-horizontal form-inline comUserPosition-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.validationOption" name="comUserPositionForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>职称</th><th>审批单位</th><th>开始日期</th><th>结束日期</th><th></th></tr><tr ng-repeat="item in vm.count.comUserPosition track by $index"><td><input class="form-control input-sm" required="" name="positionName" ng-model="item.positionName" placeholder="在职职称" type="text"></td><td><input type="text" name="reviewUnit" required="" class="form-control input-sm" ng-model="item.reviewUnit"></td><td><span class="input-group"><input type="text" id="comUserPosition_startDate_{{$index}}" required="" name="comUserPositionStartDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.startDate"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'startDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><span class="input-group"><input type="text" on-open-focus="true" id="comUserPosition_endDate_{{$index}}" required="" name="comUserPositionEndDate" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.endDate"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'endDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><button ng-click="vm.removeItem(\'comUserPosition\', $index,item.seqId)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'comUserPosition\')" class="btn btn-primary btn-sm">添加职称</button> <button data-type="comUserPosition" w5c-form-submit="vm.save(\'comUserPosition\', $event)" class="btn btn-success btn-sm">保存</button></div></form></uib-tab><uib-tab index="2" heading="护理信息" disable="!vm.accessible"><form class="form-horizontal form-inline comUserNursing-form" w5c-form-validate="vm.user.validationOption" name="comUserNursingForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>工作单位</th><th>单位级别</th><th>所属部门</th><th>职务</th><th>起始日期</th><th>结束日期</th><th></th></tr><tr ng-repeat="item in vm.count.comUserNursing"><td><input class="form-control input-sm" ng-model="item.reviewUnit" type="text"></td><td><input type="text" class="form-control input-sm" ng-model="item.unitLevel"></td><td><input type="text" class="form-control input-sm" ng-model="item.deptName"></td><td><input type="text" class="form-control input-sm" ng-model="item.position"></td><td><span class="input-group"><input type="text" id="comUserNursing_startDate_{{$index}}" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.startDate"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'startDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><span class="input-group"><input type="text" id="comUserNursing_endDate_{{$index}}" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.endDate"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'endDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><button ng-click="vm.removeItem(\'comUserNursing\', $index,item.seqId)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'comUserNursing\')" class="btn btn-primary btn-sm">添加教育信息</button> <button data-type="comUserNursing" w5c-form-submit="vm.save(\'comUserNursing\')" class="btn btn-success btn-sm">保存</button></div></form></uib-tab><uib-tab index="3" heading="教育工作" disable="!vm.accessible"><form class="form-horizontal form-inline comUserEducation-form" w5c-form-validate="vm.user.validationOption" name="comUserEducationForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>代课类型</th><th>学时数</th><th>课程专题</th><th>课程内容</th><th>起始日期</th><th>结束日期</th><th></th></tr><tr ng-repeat="item in vm.count.comUserEducation"><td><input class="form-control input-sm" ng-model="item.educationType" type="text"></td><td><input type="text" class="form-control input-sm" ng-model="item.leaningTime"></td><td><input type="text" class="form-control input-sm" ng-model="item.courseTopics"></td><td><input type="text" class="form-control input-sm" ng-model="item.courseContent"></td><td><span class="input-group"><input type="text" id="comUserEducation_startDate_{{$index}}" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.startDate"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'startDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><span class="input-group"><input type="text" id="comUserEducation_endDate_{{$index}}" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.endDate"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'endDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><button ng-click="vm.removeItem(\'comUserEducation\', $index,item.seqId)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'comUserEducation\')" class="btn btn-primary btn-sm">添加教育信息</button> <button data-type="comUserEducation" ng-click="vm.save(\'comUserEducation\')" class="btn btn-success btn-sm">保存</button></div></form></uib-tab><uib-tab index="4" heading="继续教育" disable="!vm.accessible"><form class="form-horizontal form-inline comUserTraining-form" w5c-form-validate="vm.user.validationOption" name="comUserTrainingForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>学习内容</th><th>主办单位</th><th>学时</th><th>主讲</th><th>学分类型</th><th>学分</th><th>经费</th><th>描述</th><th>起始日期</th><th>结束日期</th><th></th></tr><tr ng-repeat="item in vm.count.comUserTraining"><td><input class="form-control input-sm" ng-model="item.learnContent" type="text"></td><td><input type="text" class="form-control input-sm" ng-model="item.professional"></td><td><input type="text" class="form-control input-sm" style="width: 3em;" ng-model="item.diploma"></td><td><input type="text" class="form-control input-sm" ng-model="item.speaker"></td><td><input type="text" class="form-control input-sm" ng-model="item.creditType"></td><td><input type="text" class="form-control input-sm" style="width: 4em;" ng-model="item.credit"></td><td><input type="text" class="form-control input-sm" style="width: 4em;" ng-model="item.funding"></td><td><input type="text" class="form-control input-sm" ng-model="item.describe"></td><td><span class="input-group"><input type="text" id="comUserTraining_startDate_{{$index}}" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.startDate"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'startDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><span class="input-group"><input type="text" id="comUserTraining_endDate_{{$index}}" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.endDate"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'endDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><button ng-click="vm.removeItem(\'comUserTraining\', $index,item.seqId)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'comUserTraining\')" class="btn btn-primary btn-sm">添加继续教育</button> <button data-type="comUserTraining" ng-click="vm.save(\'comUserTraining\')" class="btn btn-success btn-sm">保存</button></div></form></uib-tab><uib-tab index="5" heading="学历信息" disable="!vm.accessible"><form class="form-horizontal form-inline comUserLearning-form" w5c-form-validate="vm.user.validationOption" name="comUserLearningForm"><div class="table-wrap"><table class="table table-striped table-condensed table-no-border"><tr><th>学校</th><th>专业</th><th>学历</th><th>学历证书编号</th><th>学位</th><th>学位证书编号</th><th>描述</th><th>开始时间</th><th>结束时间</th><th></th></tr><tr ng-repeat="item in vm.count.comUserLearning"><td><input class="form-control input-sm" ng-model="item.school" type="text"></td><td><input type="text" class="form-control input-sm" ng-model="item.professional"></td><td><input type="text" class="form-control input-sm" ng-model="item.diploma"></td><td><input type="text" class="form-control input-sm" ng-model="item.diplomaNo"></td><td><input type="text" class="form-control input-sm" ng-model="item.degree"></td><td><input type="text" class="form-control input-sm" ng-model="item.degreeNo"></td><td><input type="text" class="form-control input-sm" ng-model="item.describe"></td><td><span class="input-group"><input type="text" id="comUserLearning_startDate_{{$index}}" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.startDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.startDate"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'startDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><span class="input-group"><input type="text" id="comUserLearning_endDate_{{$index}}" uib-datepicker-popup="" datepicker-options="vm.dateOptions" is-open="item.endDateIsOpen" close-text="关闭" current-text="今天" clear-text="清除" class="form-control input-sm input-date" ng-model="item.endDate"> <span class="input-group-btn"><button type="button" class="btn btn-sm btn-default" ng-click="vm.openCalender(\'endDateIsOpen\', item)"><i class="fa fa-calendar"></i></button></span></span></td><td><button ng-click="vm.removeItem(\'comUserLearning\', $index,item.seqId)" class="btn btn-sm btn-danger">删除</button></td></tr></table></div><div class="container-fluid"><button ng-click="vm.addItem(\'comUserLearning\')" class="btn btn-primary btn-sm">添加学历</button> <button data-type="comUserLearning" ng-click="vm.save(\'comUserLearning\')" class="btn btn-success btn-sm">保存</button></div></form></uib-tab><uib-tab index="6" heading="家庭成员" disable="!vm.accessible"><form class="form-horizontal comUserFamily-form" w5c-form-validate="vm.user.validationOption" name="comUserFamilyForm"><table class="table table-striped table-condensed table-no-border"><tr><th>亲属关系</th><th>姓名</th><th>联系电话</th><th>邮件</th><th>备注</th><th></th></tr><tr ng-repeat="item in vm.count.comUserFamily"><td><input type="hidden" ng-model="item.userCode" ng-value="vm.comUser.userCode"> <input class="form-control input-sm" ng-model="item.relation" type="text"></td><td><input type="text" class="form-control input-sm" ng-model="item.name"></td><td><input type="text" class="form-control input-sm" ng-model="item.phone"></td><td><input type="text" class="form-control input-sm" ng-model="item.email"></td><td><input type="text" class="form-control input-sm" ng-model="item.remark"></td><td><button ng-click="vm.removeItem(\'comUserFamily\', $index,item.seqId)" class="btn btn-sm btn-danger">删除</button></td></tr></table><div class="container-fluid"><button ng-click="vm.addItem(\'comUserFamily\')" class="btn btn-primary btn-sm">添加成员</button> <button data-type="comUserFamily" ng-click="vm.save(\'comUserFamily\')" class="btn btn-success btn-sm">保存</button></div></form></uib-tab></uib-tabset></div></div>'),
e.put("app/system/roles/addRole.tpl.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写角色信息</h5></div><div class="modal-body"><form class="form-horizontal comUser-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="userForm"><div class="container-fluid"><div class="col-md-8"><div class="form-group"><label for="name" class="col-sm-3 control-label">角色名称：</label><div class="col-sm-9"><input class="form-control input-sm" required="" ng-model="vm.formData.roleName" id="roleName" name="roleName" type="text"></div></div><div class="form-group"><label for="email" class="col-sm-3 control-label">描述：</label><div class="col-sm-9"><textarea class="form-control input-sm" name="remark" ng-model="vm.formData.remark"></textarea></div></div><div class="form-group"><label for="name" class="col-sm-3 control-label"></label><div class="col-sm-9"><button class="btn btn-sm btn-success {{vm.loginBtnStatus.state}}" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div></div></div></form></div></div>'),e.put("app/system/roles/roles.tpl.html",'<div class="col-md-2"><div class="panel pull-left dept-wrapper panel-default"><div class="panel-heading"><i class="fa fa-bars"></i> <span>角色列表</span></div><div class="panel-body list"><ul class="sublist"><li ng-repeat="item in vm.roleData" class="accordion-item" ng-class="{\'active\': item.roleCode === vm.roleDetail.roleCode}"><a ng-click="vm.load(item)" data-role-code="{{item.roleCode}}" class="sublist__item">{{item.roleName}}</a></li></ul></div></div></div><div class="col-md-10"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-user"></i> <span>角色信息</span><div class="pull-right"><button ng-click="vm.open()" class="btn btn-primary btn-xs">添加角色</button></div></div><div class="panel-body"><form data-role-id="{{vm.roleDetail.seqId}}" class="form form-horizontal w5c-form role-edit-form change-user-form" novalidate="" w5c-form-validate="vm.validationOption" name="roleEditForm"><div class="container-fluid"><div class="col-md-6"><div class="form-group"><label for="roleCode" class="col-sm-3 control-label">角色编号：</label><div class="col-sm-9"><input class="form-control input-sm" ng-model="vm.roleDetail.roleCode" id="roleCode" name="roleCode" type="text"></div></div><div class="form-group"><label for="roleName" class="col-sm-3 control-label">角色名称：</label><div class="col-sm-9"><input class="form-control input-sm" required="" ng-model="vm.roleDetail.roleName" id="roleName" name="roleName" type="text"></div></div><div class="form-group"><label class="col-sm-3 control-label"></label><div class="col-sm-9"><button class="btn btn-sm btn-success {{vm.loginBtnStatus.state}}" type="button" ng-disabled="" w5c-form-submit="vm.edit()">保存</button> <button class="btn btn-sm btn-danger" type="button" ng-disabled="" ng-click="vm.del()">删除</button></div></div></div><div class="col-md-6"><div class="form-group"><label for="remark" class="col-sm-3 control-label">描述：</label><div class="col-sm-9"><textarea class="form-control input-sm" id="remark" name="remark" ng-model="vm.roleDetail.remark"></textarea></div></div></div></div><div class="navgation-edition container-fluid" ng-if="vm.roleDetail"><div class="col-md-5"><div class="panel panel-danger"><div class="panel-heading"><i class="fa fa-bars"></i> <span>未添加的功能</span></div><uib-accordion class="list-accordion" close-others="false"><uib-accordion-group ng-repeat="item in vm.notHaveList" panel-class="list__title" is-open="item.isOpen"><uib-accordion-heading><span class="dept-list__text">{{item.funName}}</span> <i class="pull-right fa" ng-class="{\'fa-angle-down\': item.isOpen, \'fa-angle-right\': !item.isOpen}"></i></uib-accordion-heading><ul class="dept-sublist"><li ng-repeat="subItem in item.child"><a ng-click="vm.navExchange(item, subItem, $parent.$index, $index, \'add\')" class="sublist__item">{{subItem.funName}}</a></li></ul></uib-accordion-group></uib-accordion></div></div><div class="col-md-2 exchange-icon"><div class="text-center"><i class="fa fa-exchange"></i></div></div><div class="col-md-5"><div class="panel panel-success"><div class="panel-heading"><i class="fa fa-bars"></i> <span>已添加的功能</span></div><uib-accordion class="list-accordion" close-others="false"><uib-accordion-group ng-repeat="item in vm.hadList" panel-class="list__title" is-open="item.isOpen"><uib-accordion-heading><span class="dept-list__text">{{item.funName}}</span> <i class="pull-right fa" ng-class="{\'fa-angle-down\': item.isOpen, \'fa-angle-right\': !item.isOpen}"></i></uib-accordion-heading><ul class="dept-sublist"><li ng-repeat="subItem in item.child"><a ng-click="vm.navExchange(item, subItem, $parent.$index, $index, \'remove\')" class="sublist__item">{{subItem.funName}}</a></li></ul></uib-accordion-group></uib-accordion></div></div></div></form></div></div></div>'),e.put("app/system/users/addExistRole.tpl.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">编辑用户角色信息</h5></div><div class="modal-body"><form class="form-horizontal comUser-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="userForm"><div class="container-fluid"><div class="col-md-8"><div class="form-group"><label for="name" class="col-sm-3 control-label">角色名称：</label><div class="col-sm-9"><select class="form-controll input-sm" ng-options="role.roleName for role in vm.metaData.roleList track by role.roleCode" name="userName" ng-model="vm.formData.role"></select></div></div><div class="form-group"><label for="email" class="col-sm-3 control-label">所属科室：</label><div class="col-sm-9"><select class="form-controll input-sm" ng-options="dept.deptName for dept in vm.metaData.deptList track by dept.deptCode" name="dept" ng-model="vm.formData.dept"></select></div></div></div></div></form></div><div class="modal-footer"><button class="btn btn-sm btn-success {{vm.roleBtnStatus.state}}" type="button" ng-click="vm.formData = {data: [{roleCode:vm.formData.role.roleCode,deptCode: vm.formData.dept.deptCode, userId: vm.metaData.currentUser.seqId}]}; vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div>'),e.put("app/system/users/addUser.tpl.html",'<div><div class="modal-header"><button type="button" ng-click="vm.cancel()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">填写角色信息</h5></div><div class="modal-body"><form class="form-horizontal comUser-form w5c-form" role="form" novalidate="" w5c-form-validate="vm.role.validationOption" name="userForm"><div class="container-fluid"><div class="col-md-8"><div class="form-group"><label for="name" class="col-sm-3 control-label">所属部门：</label><div class="col-sm-9"><input type="hidden" name="deptCode" ng-model="vm.formData.deptCode"> <input class="form-control input-sm" required="" ng-model="vm.formData.deptName" readonly="" id="deptCode" type="text"></div></div><div class="form-group"><label for="name" class="col-sm-3 control-label">用户姓名：</label><div class="col-sm-9"><select class="form-controll input-sm" name="userName" ng-model="vm.formData.userName" ng-change="vm.formData.userCode = (vm.metaData.userList | filter:vm.formData.userName)[0].userCode"><option ng-repeat="user in vm.metaData.userList" value="{{user.userName}}">{{user.userName}}</option></select></div></div><div class="form-group"><label for="name" class="col-sm-3 control-label">用户编号：</label><div class="col-sm-9"><input class="form-control input-sm" required="" ng-model="vm.formData.userCode" id="userCode" readonly="" name="userCode" type="text"></div></div><div class="form-group"><label for="name" class="col-sm-3 control-label">登录名：</label><div class="col-sm-9"><input class="form-control input-sm" required="" ng-model="vm.formData.loginName" id="loginName" name="loginName" type="text"></div></div><div class="form-group"><label for="email" class="col-sm-3 control-label">密码：</label><div class="col-sm-9"><input class="form-control input-sm" required="" ng-model="vm.formData.password" id="password" name="password" type="text"></div></div><div class="form-group"><label for="name" class="col-sm-3 control-label"></label><div class="col-sm-9"><button class="btn btn-sm btn-success {{vm.loginBtnStatus.state}}" type="button" w5c-form-submit="vm.ok()">保存</button> <button class="btn btn-sm btn-default" type="button" ng-click="vm.cancel()">取消</button></div></div></div></div></form></div></div>'),e.put("app/system/users/users.tpl.html",'<div class="col-md-2"><div class="panel pull-left dept-wrapper panel-default"><div class="panel-heading"><i class="fa fa-bars"></i> <span>科室列表</span></div><div class="panel-body list"><div class="list-filter"><input type="text" class="form-control input-sm" ng-model="vm.filterText.deptName" placeholder="输入关键字搜索"></div><uib-accordion class="list-accordion"><div class="list__tile"><a href="javascript:;" ng-class="{\'active\': vm.deptData.deptCode === vm.selectedDept}" ng-click="vm.load(vm.deptData.deptCode, vm.deptData.deptName)"><span class="list__text ng-binding ng-scope" role="button" tabindex="0">{{vm.deptData.deptName}}</span> <i class="pull-right fa fa-angle-down"></i></a></div><ul class="sublist"><li ng-repeat="subItem in vm.deptData.belongedDepts | filter:vm.filterText" class="accordion-item" ng-class="{\'active\': subItem.deptCode === vm.selectedDept}"><a ng-click="vm.load(subItem.deptCode, subItem.deptName)" class="sublist__item">{{subItem.deptName}}</a></li></ul></uib-accordion></div></div></div><div class="col-md-10"><div class="panel panel-default"><div class="panel-heading"><i class="fa fa-user"></i> <span>用户信息</span><div class="pull-right"><button ng-click="vm.open()" class="btn btn-primary btn-xs" ng-disabled="!vm.selectedDept">添加用户</button></div></div><div class="panel-body"><table ng-table="vm.tableParams" class="table table-hover table-condensed table-bordered table-striped" demo-tracked-table="demo.tableTracker"><tr ng-repeat="row in $data" ng-class="{\'info\': row.userCode === vm.selectedUser.userCode}" ng-click="vm.showRole(row)"><td data-title="\'员工编号\'">{{row.userCode}}</td><td data-title="\'用户姓名\'">{{row.userName}}</td><td data-title="\'登录名\'">{{row.loginName}}</td><td data-title="\'操作\'"><button class="btn btn-default btn-xs" uib-tooltip="编辑用户信息" ng-click="vm.open(row)" ng-if="!row.isEditing"><span class="fa fa-pencil"></span></button> <button class="btn btn-danger btn-xs" uib-tooltip="删除用户" ng-click="vm.del(row.seqId)" ng-if="!row.isEditing"><span class="fa fa-trash"></span></button></td></tr></table></div></div><div class="panel panel-default" ng-if="vm.selectedUser"><div class="panel-heading"><i class="fa fa-user"></i> <span>用户角色</span><div class="pull-right"><button ng-click="vm.openRole()" class="btn btn-primary btn-xs" ng-disabled="!vm.selectedDept">添加现有角色</button></div></div><div class="panel-body"><table ng-table="vm.roleTableParams" class="table table-hover table-condensed table-bordered table-striped" demo-tracked-table="demo.tableTracker"><tr ng-repeat="row in $data"><td data-title="\'角色编号\'">{{row.roleCode}}</td><td data-title="\'所属部门\'">{{row.deptName}}</td><td data-title="\'角色名称\'">{{row.roleName}}</td><td data-title="\'操作\'"><button class="btn btn-danger btn-xs" uib-tooltip="删除这个角色" ng-click="vm.delUserRole(row.seqId)" ng-if="!row.isEditing"><span class="fa fa-trash"></span></button></td></tr></table></div></div></div>')}]);
//# sourceMappingURL=../maps/scripts/app-fd4434684c.js.map
